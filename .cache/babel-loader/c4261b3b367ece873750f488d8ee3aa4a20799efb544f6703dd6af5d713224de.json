{"ast":null,"code":"import SystemAppHeader from \"../SystemAppHeader.vue\";\nimport { closeAdditionalUi, setContactInfoItem } from \"../../Lib/additionalUiFunctions.js\";\nexport default {\n  components: {\n    SystemAppHeader\n  },\n  props: {\n    data: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      number: \"\",\n      name: \"\",\n      surname: \"\",\n      isRedact: false,\n      imgLink: \"\"\n    };\n  },\n  computed: {\n    numbers() {\n      return this.$store.getters[\"phone/getNumbers\"];\n    },\n    isAlreadyExist() {\n      if (this.isRedact) return false;\n      return this.numbers[this.number.replace(/\\D/g, \"\")];\n    },\n    isValid() {\n      return !this.isAlreadyExist && this.number.replace(/\\D/g, \"\").length === 7 && this.name;\n    }\n  },\n  watch: {\n    number(value) {\n      if (value.length === 7 && !value.includes(\"-\")) {\n        this.number = value.replace(/(\\d{3})(\\d{2})(\\d{2})/, \"$1-$2-$3\");\n      }\n    }\n  },\n  methods: {\n    onCancel() {\n      closeAdditionalUi();\n    },\n    createNewMsg() {\n      this.$emit(\"createNewMsg\");\n    },\n    setData() {\n      this.number = this.data?.number || \"\";\n      this.name = this.data?.name || \"\";\n      this.surname = this.data?.surname || \"\";\n      this.isRedact = this.data?.isRedact || false;\n      this.imgLink = this.data?.img || \"\";\n      console.log(`this.data`);\n      console.log(this.data);\n    },\n    createContact() {\n      const number = this.number.replace(/\\D/g, \"\");\n      if (this.isRedact) {\n        this.$callClient(\"W:Phone:EditContact\", {\n          number,\n          name: this.name,\n          surname: this.surname,\n          img: this.imgLink\n        });\n        closeAdditionalUi();\n        setContactInfoItem({\n          number,\n          name: this.name,\n          surname: this.surname,\n          img: this.imgLink\n        });\n        return;\n      }\n      this.$callClient(\"W:Phone:AddContact\", {\n        number,\n        name: this.name,\n        surname: this.surname,\n        img: this.imgLink\n      });\n      closeAdditionalUi();\n      setContactInfoItem({\n        number,\n        name: this.name,\n        surname: this.surname,\n        img: this.imgLink\n      });\n    },\n    onNumberInput(e) {\n      let number = e.target.value;\n      number = number.replace(/\\D/g, \"\");\n      if (number.length > 7) {\n        number = number.slice(0, -1);\n      }\n      this.number = number.replace(/(\\d{3})(\\d{2})(\\d{2})/, \"$1-$2-$3\");\n    }\n  },\n  mounted() {\n    this.setData();\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}