{"ast":null,"code":"import PhoneWrapper from \"./Components/PhoneWrapper.vue\";\nimport PhoneHeader from \"./Components/PhoneHeader.vue\";\nimport PhoneMainPage from \"./Pages/PhoneMainPage/PhoneMainPage.vue\";\nimport AppView from \"./Components/AppView.vue\";\nimport { closeAdditionalUi } from \"./Lib/additionalUiFunctions\";\nimport PhoneCallScreen from \"./Components/Contacts/PhoneCallScreen.vue\";\nimport PhoneModal from \"./Components/PhoneModal.vue\";\nimport NotifySection from \"./Components/NotifySection/NotifySection.vue\";\nimport { initSettings } from \"./Lib/phonePlaySound\";\nimport { setNewMsgUI } from \"./Lib/additionalUiFunctions\";\nexport default {\n  data() {\n    return {\n      isCalling: false\n    };\n  },\n  props: {\n    isForNotify: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    isAppActive() {\n      let splitedPath = this.$route.fullPath.split(\"/\");\n      splitedPath = splitedPath.filter(item => item);\n      return splitedPath.length > 1;\n    },\n    getHelpersPageViewItem() {\n      return this.$store.getters[\"phone/getHelpersPageViewItem\"];\n    },\n    getSettingsData() {\n      return this.$store.getters[\"phone/getSettingsData\"];\n    }\n  },\n  watch: {\n    getSettingsData: {\n      handler() {\n        initSettings({\n          volume: this.getSettingsData.soundSettings?.notifyValue\n        });\n      },\n      deep: true\n    },\n    $route() {\n      closeAdditionalUi();\n    }\n  },\n  methods: {\n    onkeydown(e) {\n      if (document.activeElement.tagName === \"INPUT\" || document.activeElement.tagName === \"TEXTAREA\") {\n        return;\n      }\n      const fullPath = this.$route.fullPath;\n      if (e.keyCode === 8) {\n        if (!this.$route.fullPath.includes(`/Phone`)) {\n          return;\n        }\n        if (this.$route.fullPath == `/Phone`) {\n          this.$callClient(\"W:Phone:ClosePhone\");\n          return;\n        }\n        if (this.getHelpersPageViewItem) {\n          closeAdditionalUi();\n        } else {\n          if (fullPath.includes(`/Phone/PhoneApp`) || fullPath.includes(\"BankApp/Main/Main\")) {\n            this.$router.push(\"/Phone\");\n            return;\n          }\n          this.$router.go(-1);\n        }\n      }\n    },\n    openNewMsq(number) {\n      console.log(\"openNewMsq\", number);\n      setTimeout(() => {\n        setNewMsgUI({\n          number\n        });\n      });\n    }\n  },\n  components: {\n    PhoneCallScreen,\n    PhoneWrapper,\n    PhoneHeader,\n    PhoneMainPage,\n    AppView,\n    PhoneModal,\n    NotifySection\n  },\n  mounted() {\n    if (this.isForNotify) {\n      window.addEventListener(\"keydown\", this.onkeydown);\n      initSettings({\n        volume: this.getSettingsData.soundSettings?.notifyValue\n      });\n    } else {\n      this.$onClient(\"W:Phone:OpenNewMsq\", this.openNewMsq);\n      this.$callClient(\"C:Phone:Ready\");\n    }\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keydown\", this.onkeydown);\n    if (!this.isForNotify) {\n      // this.$offClient(\"W:Phone:OpenNewMsq\", this.openNewMsq);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}