{"ast":null,"code":"import Phone from \"@/Application/Pages/Phone/Phone.vue\";\nimport PhoneMixin from \"@/Application/Pages/Phone/Mixins/PhoneMixin.vue\";\nexport default {\n  components: {\n    Phone\n  },\n  mixins: [PhoneMixin],\n  data() {\n    return {\n      height: 4,\n      isMounted: false,\n      priviusNotifyLenght: null,\n      priviusCallingData: null,\n      soundId: null\n    };\n  },\n  watch: {\n    notifyList: {\n      handler(newValue) {\n        if (newValue.length > this.priviusNotifyLenght) {\n          this.playSound(require(\"@/Application/Pages/Phone/Assets/Sounds/System/iphone_ding.mp3\"));\n        }\n        this.priviusNotifyLenght = newValue.length;\n      },\n      deep: true\n    },\n    callingData: {\n      handler(newValue) {\n        let ringtone = this.settingsData.ringtone;\n        if (ringtone.includes(\"default\")) {\n          ringtone = require(`@/Application/Pages/Phone/Assets/Sounds/Ringtones/${this.settingsData.ringtone}.mp3`);\n        }\n        if (newValue.isCalling && !this.priviusCallingData?.isCalling && newValue.isIncoming && !newValue.isAccepted) {\n          this.soundId = this.playSound(ringtone, {\n            loop: true\n          });\n          console.log(\"play sound\", this.soundId);\n        }\n        if (newValue.isCalling && !this.priviusCallingData?.isCalling && !newValue.isIncoming && !newValue.isAccepted) {\n          this.soundId = this.playSound(require(\"@/Application/Pages/Phone/Assets/Sounds/System/ringing.mp3\"), {\n            loop: true\n          });\n        }\n        console.log(\"wait sound\", this.soundId);\n        if (!newValue.isCalling || newValue.isAccepted) {\n          this.stopSound(this.soundId);\n          console.log(\"stop sound\", this.soundId);\n        }\n        this.priviusCallingData = {\n          ...newValue\n        };\n      },\n      deep: true\n    }\n  },\n  computed: {\n    isCurrentPage() {\n      return this.$route.path.toLocaleLowerCase().includes(\"phone\");\n    },\n    isShowNotify() {\n      console.log(!this.isCurrentPage && (this.callingData.isCalling || this.notifyList.length));\n      return !this.isCurrentPage && (this.callingData.isCalling || this.notifyList.length);\n    },\n    notifyList() {\n      return this.$store.getters[\"phone/getNotifyList\"];\n    },\n    callingData() {\n      return this.$store.getters[\"phone/getCallingData\"];\n    },\n    settingsData() {\n      return this.$store.getters[\"phone/getSettingsData\"];\n    },\n    numbers() {\n      return this.$store.getters[\"phone/getNumbers\"];\n    },\n    getName() {\n      const {\n        numbers,\n        callingData\n      } = this;\n      const contact = numbers[callingData.number];\n      return contact ? contact.name : callingData.number;\n    }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.isMounted = true;\n    }, 1000);\n  }\n};","map":null,"metadata":{},"sourceType":"module"}