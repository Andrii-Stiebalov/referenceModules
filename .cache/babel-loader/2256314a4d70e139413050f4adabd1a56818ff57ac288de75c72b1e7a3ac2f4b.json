{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      isAutoModeON: false,\n      isShowCombinations: false,\n      balance: 0,\n      currentBet: 0,\n      notifyArr: [],\n      jackpot: 0,\n      slotData: {}\n    };\n  },\n  methods: {\n    getPath(path) {\n      return require(`./Assets/slotIcons/${this.slotData.Type}/${path}.png`);\n    },\n    close() {\n      this.$callClient(\"C:SlotMachine:LeaveMachine\");\n    },\n    setData(data) {\n      this.slotData = data.slotData;\n      this.jackpot = data.jackpot;\n      this.balance = data.balance;\n      this.currentBet = this.slotData.MinBet;\n    },\n    updateBet(type) {\n      if (type == \"-\") {\n        const bet = this.currentBet - this.slotData.Step;\n        this.currentBet = bet >= this.slotData.MinBet ? bet : this.currentBet;\n      } else {\n        const bet = this.currentBet + this.slotData.Step;\n        this.currentBet = bet <= this.slotData.MaxBet ? bet : this.currentBet;\n      }\n    },\n    makebet(value) {\n      if (value > this.balance) {\n        return;\n      }\n      this.$callClient(\"C:SlotMachine:makebet\", value);\n    },\n    autoMode() {\n      this.isAutoModeON = !this.isAutoModeON;\n      this.$callClient(\"C:SlotMachine:autoMode\", this.isAutoModeON);\n    },\n    handleBlur() {\n      const button = document.getElementById(\"middleButton\");\n      button.focus();\n    },\n    updateBalance(newBalance) {\n      this.balance = newBalance;\n    },\n    showNotify(price) {\n      if (this.notifyArr.length > 0) {\n        this.notifyArr.pop();\n        setTimeout(() => this.notifyArr.push(price), 500);\n        setTimeout(() => this.notifyArr.pop(), 5000);\n      } else {\n        this.notifyArr.push(price);\n        setTimeout(() => this.notifyArr.pop(), 5000);\n      }\n    },\n    updateJackpot(newJecpot) {\n      this.jackpot = newJecpot;\n    },\n    onKeyUp(e) {\n      if (e.keyCode === 27 && !window.isModalShow) {\n        this.close();\n      }\n      if (e.keyCode == 38) {\n        this.updateBet(\"+\");\n      }\n      if (e.keyCode == 40) {\n        this.updateBet(\"-\");\n      }\n    }\n  },\n  mounted() {\n    this.$onClient(\"W:SlotMachine:setData\", this.setData);\n    this.$onClient(\"W:SlotMachine:UpdateBalance\", this.updateBalance);\n    this.$onClient(\"W:SlotMachine:updateJackpot\", this.updateJackpot);\n    this.$onClient(\"W:SlotMachine:Notify\", this.showNotify);\n    this.$callClient(\"C:SlotMachine:Ready\");\n    this.handleBlur();\n    window.addEventListener(\"keydown\", this.onKeyUp);\n  },\n  beforeUnmount() {\n    this.$offClient(\"W:SlotMachine:setData\", this.setData);\n    this.$offClient(\"W:SlotMachine:UpdateBalance\", this.updateBalance);\n    this.$offClient(\"W:SlotMachine:UpdateBalance\", this.updateJackpot);\n    this.$offClient(\"W:SlotMachine:Notify\", this.showNotify);\n    this.$callClient(\"C:SlotMachine:LeaveMachine\");\n    window.removeEventListener(\"keyup\", this.onKeyUp);\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}