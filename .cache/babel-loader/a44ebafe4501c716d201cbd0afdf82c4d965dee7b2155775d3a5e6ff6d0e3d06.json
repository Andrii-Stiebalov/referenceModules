{"ast":null,"code":"import { formatNumber } from \"@/Application/Pages/MarketPlace/Assets/functions\";\nimport { onUnmounted } from \"vue\";\nexport default {\n  props: {\n    offerData: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      timerValue: null,\n      status: null,\n      interval: null\n    };\n  },\n  mounted() {\n    if (!this.offerData?.reason) {\n      this.startTimer();\n    }\n    onUnmounted(() => {\n      if (this.interval) {\n        clearInterval(this.interval);\n      }\n    });\n  },\n  computed: {\n    getSelectedItem() {\n      return this.$store.getters[\"marketPlace/getSelectedItem\"];\n    },\n    getIsMy() {\n      return this.offerData.static === this.$store.getters[\"playerMenu/getStatic\"];\n    },\n    getIsFocusExchangeOffers() {\n      return this.$store.getters[\"marketPlace/getIsFocusExchangeOffers\"];\n    }\n  },\n  methods: {\n    onMore() {\n      this.$store.commit(\"marketPlace/openModal\", [this.offerData, \"complainShow\"]);\n    },\n    formatNumber(num) {\n      return formatNumber(num, \" \");\n    },\n    getTimeDifference() {\n      const endTime = new Date(this.offerData.endTime);\n      const now = new Date();\n      let difference = endTime - now;\n      if (difference <= 0) {\n        this.timerValue = this.$t(\"Час минув\");\n        this.$callClient(\"C:MarketPlace:Exchange:Offer:TimeIsUp\", this.getSelectedItem.id, this.offerData.id);\n        this.stopTimer();\n      } else {\n        const days = Math.floor(difference / (1000 * 60 * 60 * 24));\n        difference -= days * (1000 * 60 * 60 * 24);\n        const hours = Math.floor(difference / (1000 * 60 * 60) % 24);\n        difference -= hours * (1000 * 60 * 60);\n        const minutes = Math.floor(difference / (1000 * 60) % 60);\n        const hoursString = hours ? `${hours} ${this.$t(\"г.\")}` : \"\";\n        const minutesString = minutes ? `${minutes} ${this.$t(\"хв.\")}` : \"\";\n        const daysString = days ? `${days} ${this.$t(\"д.\")}` : \"\";\n        this.timerValue = `${daysString} ${hoursString} ${minutesString}`;\n        if (!days && !hours && !minutes) {\n          this.timerValue = this.$t(\"Менше хвилини\");\n        }\n      }\n    },\n    startTimer() {\n      this.getTimeDifference();\n      this.interval = setInterval(this.getTimeDifference, 30000);\n    },\n    stopTimer() {\n      clearInterval(this.interval);\n    },\n    onBuy() {\n      const data = this.offerData;\n      data.name = this.getSelectedItem.name;\n      data.timer = this.timerValue;\n      this.$store.commit(\"marketPlace/openModal\", [data, \"exchangeBuy\"]);\n    },\n    onDelete() {\n      this.$store.commit(\"marketPlace/openModal\", [{\n        id: this.offerData.id\n      }, \"exchangeOfferDelete\"]);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}