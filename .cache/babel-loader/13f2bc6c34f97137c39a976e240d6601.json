{"ast":null,"code":"import cdnResolverImage from \"@/Components/CdnResolverImage.vue\";\nexport default {\n  components: {\n    cdnResolverImage\n  },\n  data: function () {\n    return {\n      zoom: 1,\n      locale: \"ua\",\n      keyReceive: true,\n      active: true,\n      items: [],\n      displayname: \"\",\n      category: [],\n      type: 0,\n      selectedItemIndex: -1,\n      counter: 1,\n      wallet: \"$\",\n      minCounter: 1,\n      maxCounter: 100,\n      money: 0,\n      moneyBank: 0,\n      consultant: [\"Здравствуйте! Что конкретно вас интересует?\", \"Здравствуйте! Чем могу вам помочь?\", \"Здравствуйте! Очень рады видеть Вас!\"],\n      selectConsultant: \"Один раз не Тарас\",\n      animationTimer: [],\n      animationDuration: 100\n    };\n  },\n  methods: {\n    setKey(data) {\n      window.login = data.login;\n      window.key = data.key;\n      window.images = new Map();\n      this.keyReceive = true;\n    },\n    onresize() {\n      let vw = window.innerWidth / 100;\n      let vh = window.innerHeight / 100;\n      let vmin = vh < vw ? vh : vw;\n      this.zoom = Number((window.innerWidth < 170 * vmin ? window.innerWidth / 170 / vmin : window.innerHeight < 100 * vmin + 5 * vw ? window.innerHeight / (100 * vmin + 5 * vw) : 1).toFixed(3));\n    },\n    render(data) {\n      let arr = [];\n      for (let i = 0; i < data.length; i++) {\n        if (!arr.length) {\n          arr.push({\n            itemCategory: data[i].itemCategory,\n            itemLable: this.getName(data[i].itemCategory)\n          });\n        } else {\n          if (!arr.find(item => item.itemCategory === data[i].itemCategory)) {\n            arr.push({\n              itemCategory: data[i].itemCategory,\n              itemLable: this.getName(data[i].itemCategory)\n            });\n          }\n        }\n      }\n      this.category = arr;\n      this.$nextTick(() => {\n        for (let i = 0; i < this.animationTimer.length; i++) {\n          clearTimeout(this.animationTimer[i]);\n        }\n        document.querySelector(\".shop24-right__side-content__tabs.active\").childNodes.forEach((item, index) => {\n          if (item.className === \"shop24-right__side-content__item\") {\n            this.animationTimer.push(setTimeout(() => {\n              item.classList.add(\"animate\");\n            }, index * this.animationDuration));\n          }\n        });\n      });\n    },\n    getItemImage(id) {\n      return `cdn/inventory/other/${id}.png`;\n    },\n    getName(category) {\n      switch (category) {\n        case \"products\":\n          return this.$t(\"Продукты\");\n        case \"seeds\":\n          return this.$t(\"Семена\");\n        case \"medicines\":\n          return this.$t(\"Лекарства\");\n        case \"tools\":\n          return this.$t(\"Инструменты\");\n        case \"other\":\n          return this.$t(\"Разное\");\n        case \"rod\":\n          return this.$t(\"Удочки\");\n        case \"pistol\":\n          return this.$t(\"Пистолеты\");\n        case \"bump\":\n          return this.$t(\"Дробовики\");\n        case \"uzi\":\n          return this.$t(\"Автоматы\");\n        case \"ammo\":\n          return this.$t(\"Патроны\");\n        case \"low_alcohol\":\n          return this.$t(\"Слабоалкогольные\");\n        case \"hight_alcohol\":\n          return this.$t(\"Крепкие\");\n      }\n    },\n    getId(data) {\n      return data === -1 ? null : this.items[data].itemId;\n    },\n    getTitle(data) {\n      return data === -1 ? null : this.items[data].itemTitle;\n    },\n    getPrice(data) {\n      return data === -1 ? null : this.items[data].itemPrice;\n    },\n    tabs(e) {\n      if (document.querySelector(`.shop24-right__side-content__tabs.active[data-category=\"${e.currentTarget.dataset.category}\"]`)) return;\n      document.querySelectorAll(\".shop24-left__side-content__body-tabs__content-list li\").forEach(item => {\n        item.classList.remove(\"active\");\n      });\n      e.currentTarget.classList.add(\"active\");\n      document.querySelectorAll(\".shop24-right__side-content__tabs\").forEach(item => {\n        item.classList.remove(\"active\");\n        this.$nextTick(() => {\n          item.scrollTop = 0;\n        });\n      });\n      document.querySelector(`.shop24-right__side-content__tabs[data-category=\"${e.currentTarget.dataset.category}\"]`).classList.add(\"active\");\n      document.querySelectorAll(\".shop24-right__side-content__item.animate\").forEach(item => {\n        item.classList.remove(\"active\");\n        item.classList.remove(\"animate\");\n        this.selectedItemIndex = -1;\n      });\n      document.querySelector(\".shop24-right__side-content__item.active\") !== null ? document.querySelector(\".shop24-right__side-content__item.active\").classList.add(\"animate\") : null;\n      this.animate();\n    },\n    animate() {\n      let count = 0;\n      for (let i = 0; i < this.animationTimer.length; i++) {\n        clearTimeout(this.animationTimer[i]);\n      }\n      document.querySelector(\".shop24-right__side-content__tabs.active\").childNodes.forEach(item => {\n        if (item.className === \"shop24-right__side-content__item\") {\n          count++;\n          this.animationTimer.push(setTimeout(() => {\n            item.classList.add(\"animate\");\n          }, count * this.animationDuration));\n        }\n      });\n    },\n    selectItem(e) {\n      this.counter = this.minCounter;\n      this.selectedItemIndex = this.items.findIndex(item => item.itemId === parseInt(e.currentTarget.dataset.id));\n      document.querySelectorAll(\".shop24-right__side-content__item\").forEach(item => {\n        item.classList.remove(\"active\");\n      });\n      e.currentTarget.classList.add(\"active\");\n    },\n    counterDecrement() {\n      if (this.counter > this.minCounter) {\n        this.counter--;\n      }\n    },\n    counterIncrement() {\n      if (this.counter < this.maxCounter) {\n        this.counter++;\n      }\n    },\n    inputCountValidation(e) {\n      if (!e.target.value.length) {\n        this.counter = this.minCounter;\n      }\n    },\n    buyMethods(type) {\n      try {\n        // Debug ??\n        // console.log(type);\n        // console.log(this.selectedItemIndex);\n        // console.log(this.counter);\n\n        // | ---------------- Тип ----- Index айтема -------  Кол-во --- |\n        if (this.type != 3) {\n          this.callClient(\"buyItem\", type, this.selectedItemIndex, this.counter, this.type);\n        } else {\n          this.callClient(\"buyItem\", this.items[this.selectedItemIndex][\"itemName\"], this.selectedItemIndex, this.counter, this.type);\n        }\n        this.counter = this.minCounter;\n      } catch (e) {\n        console.error(`Failed to buy item: ${e}`);\n      }\n    },\n    closebtn() {\n      try {\n        this.callClient(\"shop24close\");\n        this.active = false;\n        this.counter = this.minCounter;\n      } catch (e) {\n        console.error(`Failed to buy item: ${e}`);\n      }\n    },\n    setData(data) {\n      this.$recursiveAssign(data, this.$data);\n      this.render(this.items);\n    }\n  },\n  mounted() {\n    window.addEventListener(\"resize\", this.onresize);\n    this.onresize();\n    this.selectConsultant = this.consultant[Math.floor(Math.random() * this.consultant.length)];\n    this.$onClient(\"C:Shop24:SetData\", this.setData);\n    this.$callClient(\"W:Shop24:Ready\");\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"resize\", this.onresize);\n    this.$offClient(\"C:Shop24:SetData\", this.setData);\n  },\n  watch: {\n    active: function (data) {\n      if (!data) {\n        // Reset to default\n        this.selectedItemIndex = -1;\n        document.querySelectorAll(\".shop24-left__side-content__body-tabs__content-list li.active\").forEach(item => {\n          item.classList.remove(\"active\");\n        });\n        document.querySelectorAll(\".shop24-left__side-content__body-tabs__content-list li\")[0].classList.add(\"active\");\n        document.querySelectorAll(\".shop24-right__side-content__tabs\").forEach(item => {\n          item.classList.remove(\"active\");\n        });\n        document.querySelectorAll(\".shop24-right__side-content__tabs\")[0].classList.add(\"active\");\n        document.querySelectorAll(\".shop24-right__side-content__item\").forEach(item => {\n          item.classList.remove(\"active\");\n          item.classList.remove(\"animate\");\n        });\n        this.animate();\n      }\n    }\n  }\n};\n\n// Vue.directive(\"filter\", {\n//   bind: function (el, binding) {\n//     this.inputHandler = function (e) {\n//       let ch = String.fromCharCode(e.which);\n//       let re = new RegExp(binding.value);\n//       let value = parseInt(e.target.value + e.key);\n//       if (!ch.match(re)) {\n//         e.preventDefault();\n//       }\n\n//       if (value === 0 || value > shop24.maxCounter) {\n//         e.preventDefault();\n//       }\n//     };\n//     el.addEventListener(\"keypress\", this.inputHandler);\n//   },\n//   unbind: function (el) {\n//     el.removeEventListener(\"keypress\", this.inputHandler);\n//   },\n//   inputHandler: null,\n// });","map":null,"metadata":{},"sourceType":"module"}