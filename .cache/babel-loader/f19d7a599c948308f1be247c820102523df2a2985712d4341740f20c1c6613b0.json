{"ast":null,"code":"const mp = window.mp;\nconst Browser = window.Browser;\nconst data = {\n  showedContactInfoItem: null,\n  helpersPageViewItem: null,\n  callingData: {\n    number: \"\",\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: false,\n    date: \"2024-02-19T13:45:00\"\n  },\n  settingsData: {\n    flightMode: !false,\n    phoneSize: 1.2,\n    background: \"default\",\n    ringtone: \"default\",\n    soundSettings: {\n      notifyValue: 0.5,\n      conversationValue: 0.3\n    },\n    wallpaper: \"https://i.pinimg.com/originals/93/c6/aa/93c6aaa4424c468db1c9f7904eb400d8.gif\"\n  },\n  contacts: [{\n    id: 1,\n    name: \"НЕ ВЛАСТЬ\",\n    number: \"лох\",\n    isDefault: true,\n    isHidden: true,\n    img: `https://i.pinimg.com/originals/93/c6/aa/93c6aaa4424c468db1c9f7904eb400d8.gif`\n  }, {\n    id: 1,\n    name: \"John Doe\",\n    number: \"1111111\",\n    img: `https://images.getimg.ai/resize?url=https%3A%2F%2Fimg.getimg.ai%2Fgenerated%2Fimg-5r9GAaaaTYoQ189PC7aJa.jpeg&type=auto&width=3840`\n  }, {\n    id: 2,\n    name: \"John Snow\",\n    number: \"0000000\",\n    img: `https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExbjRnZGk2YThiazJ0MXM0cW0xbTBocW54ejJoOWdlbzRid29yMWxmaSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/VlFocaxe7AyqbyTzCT/giphy.gif`\n  }, {\n    id: 3,\n    name: \"Terion Lanister\",\n    isDefault: true,\n    number: \"5123090\"\n  }, {\n    id: 4,\n    name: \"Aria Stark\",\n    number: \"5120690\"\n  }, {\n    id: 5,\n    name: \"Sansa Stark\",\n    number: \"5127190\"\n  }, {\n    id: 6,\n    name: \"Rob Stark\",\n    number: \"5123890\"\n  }, {\n    id: 7,\n    name: \"Teon Greyjoy\",\n    number: \"5123120\"\n  }],\n  recentlyCalls: [{\n    number: \"1111111\",\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: true,\n    date: \"2024-03-17T23:54:24.659Z\"\n  }, {\n    number: \"3222333\",\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: true,\n    date: \"2024-03-17T23:54:24.659Z\"\n  }, {\n    number: \"3222333\",\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: true,\n    date: \"2024-03-17T23:54:56.208Z\"\n  }, {\n    number: \"3222333\",\n    isIncoming: false,\n    isAccepted: false,\n    date: \"2024-03-18T15:43:51.394Z\"\n  }, {\n    number: \"3222333\",\n    isIncoming: false,\n    isAccepted: false,\n    date: \"2024-03-18T15:46:13.164Z\"\n  }, {\n    number: \"3222333\",\n    isIncoming: false,\n    isAccepted: false,\n    date: \"2024-03-18T20:22:58.315Z\"\n  }, {\n    number: \"3222333\",\n    isIncoming: false,\n    isAccepted: false,\n    date: \"2024-03-18T20:23:05.506Z\"\n  }, {\n    number: \"1234567\",\n    isIncoming: false,\n    isAccepted: true,\n    date: \"2024-03-20T14:43:48.629Z\"\n  }, {\n    number: \"7687432\",\n    isIncoming: false,\n    isAccepted: false,\n    date: \"2024-03-20T15:45:52.612Z\"\n  }, {\n    number: \"7687432\",\n    isIncoming: false,\n    isAccepted: false,\n    date: \"2024-03-20T15:46:01.459Z\"\n  }],\n  favorites: [5, 6],\n  msgList: [{\n    number: \"1111111\",\n    isNoReading: true,\n    messages: [{\n      text: \"Лучше встретимся в 15:00 возле магазина на углу улицы Ленина и Пушкина в центре города\",\n      date: \"2024-02-25T14:45:00\",\n      isIncoming: true,\n      isGeo: true,\n      coords: {\n        x: 14.5614,\n        y: 620.637\n      }\n    }, {\n      date: \"2024-02-25T14:45:00\",\n      isIncoming: true,\n      imgList: [{\n        url: \"https://m.media-amazon.com/images/I/61+u0MJpDHL._UF1000,1000_QL80_.jpg\"\n      }],\n      isImg: true\n    }, {\n      text: \"Hi\",\n      date: \"2024-02-24T14:45:00\",\n      isIncoming: true\n    }, {\n      text: \"Hi\",\n      date: \"2024-02-21T13:45:00\",\n      isIncoming: true\n    }, {\n      text: \"Hi\",\n      date: \"2024-02-20T14:45:00\",\n      isIncoming: true\n    }, {\n      text: \"Hi\",\n      date: \"2024-02-20T14:45:00\"\n    }, {\n      text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec purus feugiat, vestibulum mi nec, ultricies metus. Sed auctor, eros auctor\",\n      date: \"2024-02-20T14:45:00\",\n      isIncoming: true\n    }, {\n      text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec purus feugiat, vestibulum mi nec, ultricies metus. Sed auctor, eros auctor\",\n      date: \"2024-02-20T14:45:00\"\n    }, {\n      text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec purus feugiat, vestibulum mi nec, ultricies metus. Sed auctor, eros auctor\",\n      date: \"2024-02-20T14:45:00\"\n    }, {\n      text: \"Hi\",\n      date: \"2024-02-19T13:45:00\",\n      isIncoming: true\n    }, {\n      text: \"Hi\",\n      date: \"2024-02-10T13:45:00\",\n      isIncoming: true\n    }]\n  }, {\n    number: \"860004\",\n    messages: [{\n      text: \"lorem ipsum dolor sit amet consectetur adipiscing elit nullam nec purus feugiat vestibulum mi nec ultricies metus sed auctor eros auctor\",\n      date: \"2024-02-19T13:45:00\",\n      isIncoming: false\n    }, {\n      text: \"bad connection\",\n      date: \"2024-02-19T13:45:00\",\n      isIncoming: true\n    }]\n  }, {\n    number: \"лох\",\n    messages: [{\n      text: \"lorem ipsum dolor sit amet consectetur adipiscing elit nullam nec purus feugiat vestibulum mi nec ultricies metus sed auctor eros auctor\",\n      date: \"2024-02-19T13:45:00\",\n      isIncoming: false\n    }, {\n      text: \"bad connection\",\n      date: \"2024-02-19T13:45:00\",\n      isIncoming: true\n    }]\n  }],\n  weazelList: [{\n    id: 1,\n    typeId: \"Work\",\n    description: \"WORKING SO HARD TODAY 5/5 500$ PER HOUR DRONTO HOCHET BOLSHIE DENGI\",\n    status: \"active\",\n    name: \"Weazel News 1\",\n    number: \"1111111\"\n  }, {\n    id: 2,\n    typeId: \"Work\",\n    description: \"WORKING SO HARD TODAY 5/5 500$ PER HOUR DRONTO HOCHET BOLSHIE DENGI\",\n    status: \"active\",\n    name: \"Weazel News\"\n  }, {\n    id: 3,\n    typeId: \"Work\",\n    description: \"WORKING SO HARD TODAY 5/5 500$ PER HOUR DRONTO HOCHET BOLSHIE DENGI\",\n    status: \"active\",\n    name: \"Weazel News\"\n  }, {\n    id: 4,\n    typeId: \"Work\",\n    description: \"WORKING SO HARD TODAY 5/5 500$ PER HOUR DRONTO HOCHET BOLSHIE DENGI\",\n    status: \"active\",\n    name: \"Weazel News\"\n  }, {\n    id: 5,\n    typeId: \"Work\",\n    description: \"WORKING SO HARD TODAY 5/5 500$ PER HOUR DRONTO HOCHET BOLSHIE DENGI\",\n    status: \"active\",\n    name: \"Weazel News\"\n  }],\n  myInfo: {\n    name: \"Robert Targarion\",\n    number: \"8800573\"\n  },\n  modalList: [],\n  myHouse: {\n    houseId: \"Дiм #437\",\n    houseData: {\n      owner: \"Morty_Richmond\",\n      lock: false,\n      govPrice: 390000,\n      cohabitant: 4,\n      garage: \"4\",\n      tax: 2304\n    }\n  },\n  notifyList: [],\n  currentNotifyId: 0,\n  phoneTimer: 0,\n  interval: null,\n  bankData: {\n    bankHistory: [{\n      name: \"Bank\",\n      date: \"2024-02-19T13:45:00\",\n      money: 500,\n      type: \"income\"\n    }, {\n      name: \"Bank\",\n      date: \"2024-02-19T13:45:00\",\n      money: 500,\n      type: \"outcome\"\n    }, {\n      name: \"Bank\",\n      date: \"2024-02-19T13:45:00\",\n      money: 500,\n      type: \"busines\"\n    }, {\n      name: \"Bank\",\n      date: \"2024-02-19T13:45:00\",\n      money: -500,\n      type: \"busines\"\n    }, {\n      name: \"Bank\",\n      date: \"2024-02-19T13:45:00\",\n      money: 500,\n      type: \"house\"\n    }],\n    houseData: [{\n      name: \"House\",\n      balance: 1488,\n      endDay: 5\n    }],\n    businessData: [{\n      name: \"POP SMOKE BUSINESS\",\n      balance: 1488,\n      endDay: 5\n    }]\n  },\n  galleryList: [{\n    localUrl: \"http://screenshots/1710341734092.png\",\n    url: null\n  }, {\n    localUrl: \"http://screenshots/1710343109233.png\",\n    url: null\n  }, {\n    localUrl: \"http://screenshots/1710343988699.png\",\n    url: null\n  }, {\n    localUrl: \"http://screenshots/1710344576141.png\",\n    url: \"https://i.imgur.com/tWEbf8Q.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710345089855.png\",\n    url: \"https://i.imgur.com/oIoBv9n.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710345162362.png\",\n    url: \"https://i.imgur.com/zjP0OiZ.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710347368441.png\",\n    url: \"https://i.imgur.com/Iz20UIi.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710348735611.png\",\n    url: \"https://i.imgur.com/AFhMc7J.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710349224270.png\",\n    url: null\n  }, {\n    localUrl: \"http://screenshots/1710349869505.png\",\n    url: \"https://i.imgur.com/F9RLhFY.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710362577957.png\",\n    url: \"https://i.imgur.com/QTgORtn.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710363386573.png\",\n    url: \"https://i.imgur.com/77vrdm3.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710363989573.png\",\n    url: \"https://i.imgur.com/0xdQvb5.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710364021270.png\",\n    url: \"https://i.imgur.com/y8bz8RN.jpeg\"\n  }, {\n    localUrl: \"http://screenshots/1710364373023.png\",\n    url: \"https://i.imgur.com/urtNNN3.jpeg\"\n  }],\n  taxiData: {\n    Customer: {\n      step: \"main\",\n      // main, wait, ready\n      carsNearby: 10,\n      executorNumber: \"4546465\"\n    },\n    Executor: {\n      activeOrder: null,\n      isWorking: false,\n      // true , false если false, открываем станицу с информацией как устроиться\n      orderList: [{\n        orderName: \"Заказ №1\",\n        step: \"goToTheOrder\",\n        distance: \"1465.77\",\n        price: 500\n      }]\n    }\n  },\n  blockedList: [`0000000`]\n};\nconst mainData = {\n  account: {\n    name: \"DRONTO\",\n    surname: \"FRACTALUM\"\n  },\n  money: {\n    cash: 0,\n    bank: 1500,\n    account: 0\n  }\n};\nBrowser.setStore(\"setData\", mainData);\nBrowser.setStore(\"phone/setData\", data);\n\n// CALLING SECTION ----------------------------------------------\n\nlet currentCallingData = null;\nmp.events.add(\"C:Phone:CallNumber\", number => {\n  const callingData = {\n    number,\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: true,\n    date: new Date().toISOString()\n  };\n  currentCallingData = callingData;\n  setTimeout(() => {\n    Browser.setStore(\"phone/setData\", {\n      callingData: {\n        ...callingData,\n        isAccepted: true\n      }\n    });\n    Browser.setStore(\"phone/acceptCall\");\n    currentCallingData = {\n      ...callingData,\n      isAccepted: true\n    };\n  }, 5000);\n  Browser.setStore(\"phone/setData\", {\n    callingData\n  });\n});\nmp.events.add(\"W:Phone:CancelCall\", () => {\n  const callingData = {\n    number: \"\",\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: false,\n    date: new Date().toISOString()\n  };\n  const options = {\n    type: \"add\",\n    valueName: \"recentlyCalls\",\n    data: currentCallingData,\n    isReverse: true\n  };\n  Browser.setStore(\"phone/arrayModify\", options);\n  currentCallingData = null;\n  Browser.setStore(\"phone/setData\", {\n    callingData\n  });\n  Browser.setStore(\"phone/cancelCall\");\n});\nmp.events.add(\"W:Phone:AcceptCall\", () => {\n  const callingData = {\n    number: 1111111,\n    isIncoming: true,\n    isAccepted: true,\n    isCalling: true,\n    date: new Date().toISOString()\n  };\n  Browser.setStore(\"phone/setData\", {\n    callingData\n  });\n  Browser.setStore(\"phone/acceptCall\");\n});\n\n// CONTACTS ----------------------------------------------\n\nmp.events.add(\"W:Phone:AddFavorite\", (favoriteId, isFavorite) => {\n  const options = {\n    type: isFavorite ? \"add\" : \"remove\",\n    valueName: \"favorites\",\n    data: favoriteId\n  };\n  // console.log(\"options\", options);\n  Browser.setStore(\"phone/arrayModify\", options);\n});\nmp.events.add(\"W:Phone:AddContact\", contactData => {\n  const options = {\n    type: \"add\",\n    valueName: \"contacts\",\n    data: JSON.parse(contactData)\n  };\n  Browser.setStore(\"phone/arrayModify\", options);\n});\nmp.events.add(\"W:Phone:EditContact\", contactData => {\n  // console.log(\"------contactData----------\", contactData);\n  Browser.setStore(\"phone/updateContact\", contactData);\n});\n\n// MESSAGES ----------------------------------------------\n\nmp.events.add(\"W:Phone:SendMsg\", (number, msg) => {\n  // console.log(\"number\", number, \"msg\", msg);\n  if (!number || !msg) return;\n  const msgObj = {\n    number,\n    messages: [{\n      text: msg,\n      date: new Date().toISOString(),\n      isIncoming: false\n    }]\n  };\n\n  // console.log(\"msgObj\", msgObj);\n\n  if (data.msgList.some(item => item.number === number)) {\n    const msgItem = {\n      text: msg,\n      date: new Date().toISOString(),\n      isIncoming: false\n    };\n    Browser.setStore(\"phone/addMsgByNumber\", {\n      number,\n      message: msgItem\n    });\n    return;\n  }\n  const options = {\n    type: \"add\",\n    valueName: \"msgList\",\n    data: msgObj\n  };\n  // console.log(\"options\", options);\n  Browser.setStore(\"phone/arrayModify\", options);\n});\nmp.events.add(\"W:Phone:SendPhoto\", (number, imgs) => {\n  const msgObj = {\n    number,\n    messages: [{\n      imgList: JSON.parse(imgs),\n      isImg: true,\n      date: new Date().toISOString(),\n      isIncoming: false\n    }]\n  };\n  if (data.msgList.some(item => item.number === number)) {\n    const msgItem = {\n      imgList: JSON.parse(imgs),\n      isImg: true,\n      date: new Date().toISOString(),\n      isIncoming: false\n    };\n    Browser.setStore(\"phone/addMsgByNumber\", {\n      number,\n      message: msgItem\n    });\n    return;\n  }\n\n  // console.log(\"msgObj\", msgObj);\n\n  const options = {\n    type: \"add\",\n    valueName: \"msgList\",\n    data: msgObj\n  };\n  // console.log(\"options\", options);\n  Browser.setStore(\"phone/arrayModify\", options);\n});\n\n// setInterval(() => {\n//   const msgItem = {\n//     text: \"PERVOE SOOBWENIE VAM OT DRONTO FRACTALUMA sdk lok DROXSVx\",\n//     date: new Date().toISOString(),\n//     isIncoming: true,\n//     isGeo: true,\n//   };\n//   Browser.setStore(\"phone/addMsgByNumber\", {\n//     number: \"1111111\",\n//     message: msgItem,\n//   });\n// }, 1000);\n\nmp.events.add(\"W:Phone:GalleryApp:Delete\", list => {\n  console.log(\"list\", list);\n});\nmp.events.add(\"W:Phone:SendGeo\", number => {\n  const msgObj = {\n    number,\n    messages: [{\n      coords: {\n        x: 0,\n        y: 0\n      },\n      isGeo: true,\n      date: new Date().toISOString(),\n      isIncoming: false\n    }]\n  };\n  if (data.msgList.some(item => item.number === number)) {\n    const msgItem = {\n      coords: {\n        x: 0,\n        y: 0\n      },\n      date: new Date().toISOString(),\n      isGeo: true,\n      isIncoming: false\n    };\n    Browser.setStore(\"phone/addMsgByNumber\", {\n      number,\n      message: msgItem\n    });\n    return;\n  }\n\n  // console.log(\"msgObj\", msgObj);\n\n  const options = {\n    type: \"add\",\n    valueName: \"msgList\",\n    data: msgObj\n  };\n  // console.log(\"options\", options);\n  Browser.setStore(\"phone/arrayModify\", options);\n});\n\n// setInterval(() => {\n//   const options2 = {\n//     type: \"Bank\",\n//     title: \"New message\",\n//     text: \"You have new message from 1111111\",\n//     time: 1000,\n//   };\n//   Browser.setStore(\"phone/addNotify\", options2);\n// }, 1500);\n\n// inconming message\n\n// setInterval(() => {\n//   const number = \"1011111\";\n//   const msgItem = {\n//     text: new Date().toISOString(),\n//     date: new Date().toISOString(),\n//     isIncoming: true,\n//   };\n//   Browser.setStore(\"phone/addMsgByNumber\", { number, message: msgItem });\n// }, 5000);\n\n// Weazel APP ----------------------------------------------\n\nmp.events.add(\"W:Phone:Weazel:New\", data => {\n  console.log(\"data\", data);\n  const options = {\n    type: \"add\",\n    isReverse: true,\n    valueName: \"weazelList\",\n    data: JSON.parse(data)\n  };\n  Browser.setStore(\"phone/arrayModify\", options);\n});\nlet i = 0;\n\n// setInterval(() => {\n//   i++;\n//   const data = {\n//     typeId: \"Work\",\n//     description: i,\n//     status: \"active\",\n//     name: \"Weazel News\",\n//   };\n//   const options = {\n//     type: \"add\",\n//     isReverse: true,\n//     valueName: \"weazelList\",\n//     data: data,\n//   };\n\n//   Browser.setStore(\"phone/arrayModify\", options);\n// }, 1000);\n\n// TAXI APP ----------------------------------------------\n\nmp.events.add(\"W:Phone:Taxi:CallTaxi\", () => {\n  Browser.setRoute(\"/Phone/TaxiApp/Waiting\");\n  setTimeout(() => {\n    Browser.emit(\"C:Phone:Taxi:NewOrder\", \"5123890\");\n    Browser.setRoute(\"/Phone/TaxiApp/Accepted\");\n  }, 1000);\n});\nmp.events.add(\"W:Phone:Taxi:CancelTaxi\", () => {\n  Browser.setRoute(\"/Phone/TaxiApp/Main\");\n});\nmp.events.add(\"W:Phone:Taxi:TakeOrder\", id => {\n  // Browser.setRoute(\"/Phone/TaxiApp/GoToTheOrder\");\n  Browser.setStore(\"phone/setData\", {\n    taxiData: {\n      Customer: {\n        step: \"main\",\n        // main, wait, ready\n        carsNearby: 10,\n        executorNumber: \"4546465\"\n      },\n      Executor: {\n        activeOrder: {\n          orderName: \"Заказ №1\",\n          step: \"goToTheOrder\",\n          distance: \"1465.77\",\n          price: 500\n        },\n        isWorking: true,\n        // true , false если false, открываем станицу с информацией как устроиться\n        orderList: 0\n      }\n    }\n  });\n});\nmp.events.add(\"W:Phone:Taxi:CallDriverPhone\", () => {\n  const callingData = {\n    number: \"1111134\",\n    isIncoming: false,\n    isAccepted: false,\n    isCalling: true,\n    date: new Date().toISOString()\n  };\n  currentCallingData = callingData;\n  setTimeout(() => {\n    Browser.setStore(\"phone/setData\", {\n      callingData: {\n        ...callingData,\n        isAccepted: true\n      }\n    });\n    currentCallingData = {\n      ...callingData,\n      isAccepted: true\n    };\n  }, 500);\n  Browser.setStore(\"phone/setData\", {\n    callingData\n  });\n});\nmp.events.add(\"W:Phone:Taxi:BecameDriver\", () => {\n  Browser.setRoute(\"/Phone/TaxiApp/OrderList\");\n});\n\n// HOUSE APP ----------------------------------------------\nmp.events.add(\"W:Phone:House:SetHouseRoute\", () => {});\n\n// Services APP ----------------------------------------------\n\nmp.events.add(\"W:Phone:Services:CallService\", () => {});\nmp.events.add(\"W:Phone:Contracts:GetUnloadingPlace\", contractId => {});\nmp.events.add(\"W:Phone:Contracts:GetRoute\", contractId => {});\nconst addPhoto = img => {\n  // const img = {\n  //   localUrl:\n  //     \"https://static.apostrophe.ua/uploads/image/bf2465ecee4e420da4d72ccc8cf1ab20.jpg\",\n  //   url: \"https://static.apostrophe.ua/uploads/image/bf2465ecee4e420da4d72ccc8cf1ab20.jpg\",\n  // };\n\n  const options = {\n    type: \"add\",\n    valueName: \"galleryList\",\n    data: img\n  };\n  // console.log(\"options\", options);\n  Browser.setStore(\"phone/arrayModify\", options);\n};\nconst removePhoto = localUrl => {\n  const options = {\n    type: \"remove\",\n    valueNameForRemove: \"localUrl\",\n    removingValue: localUrl,\n    valueName: \"galleryList\"\n  };\n  // console.log(\"options\", options);\n  Browser.setStore(\"phone/arrayModify\", options);\n};\n\n// Company APP ----------------------------------------------\n\nmp.events.add(\"W:Phone:Company:CreateCompany\", data => {\n  Browser.setStore(\"phone/setData\", {\n    companyData: {\n      isOwner: !true,\n      privateCode: \"123456\",\n      usersList: [{\n        id: 0,\n        name: \"Dronto\",\n        sername: \"FRACTALUM\",\n        social: \"nightwillix\",\n        isOwner: true\n      }, {\n        id: 1,\n        name: \"Dronto\",\n        sername: \"FRACTALUM\",\n        social: \"nightwillix\"\n      }]\n    }\n  });\n});\nconst callingData = {\n  number: 1111111,\n  isIncoming: true,\n  isAccepted: false,\n  isCalling: true,\n  date: new Date().toISOString()\n};\ncurrentCallingData = callingData;\nmp.events.add(\"C:Phone:Ready\", () => {\n  Browser.emit(\"W:Phone:OpenNewMsq\", \"4569872\");\n});","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}