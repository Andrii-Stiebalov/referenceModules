{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      rankList: [],\n      bindRankById: {},\n      rankLength: 22\n    };\n  },\n  methods: {\n    onDelete(rank) {\n      const {\n        id,\n        name\n      } = rank;\n      const UniversalModalData = {\n        title: this.$t(\"Удаление ранга\"),\n        content: [{\n          type: \"description\",\n          value: this.$t(`Вы уверены, что хотите удалить ранг <span>{0}<span>?`, [name])\n        }],\n        buttons: {\n          submit: {\n            name: this.$t(\"Да\"),\n            handler: () => {\n              this.$callClient(\"Controls:DeleteRank\", id);\n            }\n          },\n          cansel: {\n            name: this.$t(\"Отмена\")\n          }\n        }\n      };\n      this.$UniversalModal.create(UniversalModalData);\n    },\n    onEditRank(id) {\n      this.$callClient(\"Controls:rankChangePermissions\", id);\n    },\n    onInput(e, i) {\n      const value = e.target.value;\n      this.bindRankById[i].name = value;\n    },\n    setData(rankList) {\n      this.rankList = rankList;\n      this.setBindRankById();\n      console.log(this.bindRankById);\n    },\n    addRank(i) {\n      this.$callClient(\"Controls:AddRank\", i);\n    },\n    setBindRankById() {\n      this.bindRankById = this.rankList.reduce((acum, item) => {\n        acum[item.id] = item;\n        return acum;\n      }, {});\n    },\n    addRankFromServer(rank) {\n      this.rankList.push(rank);\n      this.setBindRankById();\n    },\n    tryToEditRankName(i) {\n      this.$callClient(\"Controls:EditRankName\", i);\n    },\n    onEnter(i) {\n      const item = this.bindRankById[i];\n      this.$callClient(\"Controls:setRankName\", i, item.name);\n      const inputItem = this.$refs[`input-${i}`][0];\n      inputItem.blur();\n    },\n    openRankNameEditor(id) {\n      const inputItem = this.$refs[`input-${id}`][0];\n      inputItem.removeAttribute(\"readonly\");\n      inputItem.focus();\n    }\n  },\n  mounted() {\n    this.$onClient(\"Controls:Ranks:SetData\", this.setData);\n    this.$onClient(\"Controls:Ranks:AddRank\", this.addRankFromServer);\n    this.$onClient(\"Controls:Ranks:OpenRankNameEditor\", this.openRankNameEditor);\n    this.$callClient(\"Controls:Ranks:Ready\");\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}