{"ast":null,"code":"export default {\n  props: {\n    endTime: {\n      type: String,\n      required: true\n    },\n    itemCardId: {\n      type: Number,\n      required: true\n    }\n  },\n  watch: {\n    endTime(newVal) {\n      this.getTimeDifference();\n    }\n  },\n  data() {\n    return {\n      timerValue: null,\n      status: null,\n      interval: null,\n      rgbColors: {\n        overday: \"64 191 106\",\n        dayLess: \"255 136 0\",\n        under12: \"247 0 50\"\n      }\n    };\n  },\n  mounted() {\n    this.getTimeDifference();\n    this.startTimer();\n  },\n  methods: {\n    startTimer() {\n      this.interval = setInterval(this.getTimeDifference, 30000);\n    },\n    stopTimer() {\n      clearInterval(this.interval);\n    },\n    getTimeDifference() {\n      const endTime = new Date(this.endTime);\n      const now = new Date();\n      let difference = endTime - now;\n      if (difference <= 0) {\n        this.timerValue = this.$t(\"Час минув\");\n        console.log(\"Таймер\");\n        this.status = \"under12\";\n        this.$callClient(\"C:MarketPlace:ItemCard:TimeIsUp\", this.itemCardId);\n        this.stopTimer();\n      } else {\n        const days = Math.floor(difference / (1000 * 60 * 60 * 24));\n        difference -= days * (1000 * 60 * 60 * 24);\n        const hours = Math.floor(difference / (1000 * 60 * 60) % 24);\n        difference -= hours * (1000 * 60 * 60);\n        const minutes = Math.floor(difference / (1000 * 60) % 60);\n        const hoursString = hours ? `${hours} ${this.$t(\"г.\")}` : \"\";\n        const minutesString = minutes ? `${minutes} ${this.$t(\"хв.\")}` : \"\";\n        const daysString = days ? `${days} ${this.$t(\"д.\")}` : \"\";\n        this.timerValue = `${daysString} ${hoursString} ${minutesString}`;\n        if (!days && !hours && !minutes) this.timerValue = this.$t(\"Менше хвилини\");\n        if (days >= 1) {\n          this.status = \"overday\";\n        } else if (days === 1 || days === 0 && hours >= 12) {\n          this.status = \"dayLess\";\n        } else if (days === 0 && hours < 12) {\n          this.status = \"under12\";\n        }\n      }\n    }\n  },\n  computed: {\n    getMainColor() {\n      return this.rgbColors[this.status];\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}