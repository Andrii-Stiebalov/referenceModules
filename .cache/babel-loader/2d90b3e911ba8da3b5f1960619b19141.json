{"ast":null,"code":"const mp = window.mp;\nconst Browser = window.Browser;\nconst data = {\n  selectDanceData: {\n    price: 256,\n    availableSongsId: [7, 8, 9]\n  },\n  playersNear: [{\n    name: \"Vladimir_Butkevich\",\n    id: 45\n  }],\n  personalRating: {\n    rating: 65299,\n    songId: 8,\n    score: 100255\n  },\n  ratingList: [{\n    name: \"Name_Surname\",\n    songId: 9,\n    score: 100255\n  }, {\n    name: \"Name_Surname\",\n    songId: 8,\n    score: 100255\n  }, {\n    name: \"lvl KOZAK\",\n    songId: 9,\n    score: 100255\n  }]\n};\nmp.events.add(\"C:DanceMiniGame:Ready\", () => {\n  Browser.emit(\"W:DanceMiniGame:SetData\", data);\n});\n\n// setRoute => /DanceMiniGame/Menu/Game\nlet songId;\n// при загрузке страницы\nmp.events.add(\"W:DanceMiniGame:Game:Ready\", () => {\n  const payload = {\n    maxScore: 100000,\n    selectedTrackId: songId\n  };\n  Browser.emit(\"W:DanceMiniGame:Game:SetTimer\", 5);\n  Browser.emit(\"W:DanceMiniGame:Game:SetData\", payload);\n  setTimeout(() => {\n    Browser.emit(\"W:DanceMiniGame:Game:PlayGame\");\n  }, 5000);\n});\n\n// после загрузки трека\nmp.events.add(\"W:DanceMiniGame:Game:SoundLoaded\", () => {\n  // начать игру\n});\nmp.events.add(\"W:DanceMiniGame:StartGame\", id => {\n  songId = JSON.parse(id).soundId;\n  Browser.setRoute(\"/DanceMiniGame/Game\");\n});","map":null,"metadata":{},"sourceType":"script"}