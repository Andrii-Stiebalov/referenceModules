{"ast":null,"code":"export default {\n  data() {\n    return {\n      selectedItem: \"\",\n      selectedNav: \"\",\n      data: {},\n      selectedSaveSection: -1,\n      selectedSection: -1,\n      localListOfSavedSection: {\n        1: {\n          Hat: 5,\n          Top: 4\n        },\n        2: {\n          Hat: 5,\n          Top: 4\n        },\n        3: {\n          Hat: 5,\n          Top: 4\n        },\n        4: {\n          Hat: 5,\n          Top: 4\n        },\n        5: {\n          Hat: 5,\n          Top: 4\n        }\n      },\n      itemsList: [\n        // {\n        //   name: \"без маски\",\n        // },\n        // {\n        //   name: \"Балаклава №1\",\n        // },\n      ],\n      permissions: [\"clothes_1\"],\n      selectedItems: {\n        // Hat: 5,\n        // Top: 4,\n      },\n      navList: [{\n        name: \"Головные уборы\",\n        iconName: \"Hat\",\n        tag: \"Hat\"\n      },\n      // {\n      //   name: \"Маски\",\n      //   iconName: \"Mask\",\n      //   tag: \"Mask\",\n      // },\n      {\n        name: \"Верхняя одежда\",\n        iconName: \"Jacket\",\n        tag: \"Top\"\n      },\n      // {\n      //   name: \"Нижняя одежда\",\n      //   iconName: \"T-Short\",\n      //   tag: \"UnderShirt\",\n      // },\n      {\n        name: \"Штаны\",\n        iconName: \"Trousers\",\n        tag: \"Legs\"\n      }, {\n        name: \"Обувь\",\n        iconName: \"Shoes\",\n        tag: \"Shoes\"\n      }, {\n        name: \"Аксессуары\",\n        iconName: \"Accessories\",\n        tag: \"Accessories\"\n      }],\n      isWorking: false\n    };\n  },\n  computed: {\n    listOfAllItems() {\n      return this.selectedItems[this.selectedNav.tag];\n    }\n  },\n  watch: {\n    isWorking(val) {\n      if (!val) {\n        this.selectedItems = {};\n      }\n    }\n  },\n  methods: {\n    getIconPath(iconName) {\n      return require(`./Assets/Icons/${iconName}.svg`);\n    },\n    selectItem(item) {\n      if (!this.permissions.includes(item.permission)) {\n        return;\n      }\n      this.selectedItems[this.selectedNav.tag] = item.id;\n      this.selectedItem = item.name;\n      this.$callClient(\"C:DressingRoom:SetCloth\", item.id, this.selectedNav.tag);\n    },\n    selectSavedSectionSave() {\n      this.$callClient(\"C:DressingRoom:SavePreset\", this.selectedSaveSection, this.selectedItems);\n    },\n    selectSavedSection() {\n      this.$callClient(\"C:DressingRoom:GetPreset\", this.selectedSaveSection);\n    },\n    isEmptyObj(obj) {\n      if (!obj) {\n        return;\n      }\n      return !Object.values(obj).length;\n    },\n    selectSaved(elem, i) {\n      if (this.isEmptyObj(elem)) {\n        this.localListOfSavedSection[i] = this.defaulSettings;\n      } else if (this.selectedIndexSaved === i) {\n        const listOfValues = Object.values(this.listOfSavedSection);\n        const countOfSelected = listOfValues.filter(saved => !this.isEmptyObj(saved));\n        if (countOfSelected.length === 1 && !this.isEmptyObj(this.listOfSavedSection[i])) {\n          return;\n        }\n        this.localListOfSavedSection[i] = {};\n        if (!this.isEmptyObj(this.listOfSavedSection[i])) {\n          this.$callClient(\"C:Aim:Delete\", i);\n        }\n        let index = 1;\n        while (this.isEmptyObj(this.localListOfSavedSection[index])) {\n          index++;\n          if (index > listOfValues.length) {\n            index = 0;\n            break;\n          }\n        }\n        this.selectedIndexSaved = index;\n        return;\n      }\n      this.selectedIndexSaved = i;\n    },\n    setData(data) {\n      console.log(data);\n      this.data = data;\n    },\n    setPermissions(data) {\n      this.permissions = data;\n    },\n    close() {\n      this.$callClient(\"C:DressingRoom:Close\");\n    },\n    endWorkDay() {\n      this.$callClient(\"C:DressingRoom:EndWorkDay\");\n    },\n    startWorkDay() {\n      this.$callClient(\"C:DressingRoom:StartWorkDay\", this.selectedItems);\n    },\n    onSelectSaveSection(i) {\n      this.selectedSaveSection = i;\n      this.$callClient(\"C:DressingRoom:GetPreset\", this.selectedSaveSection);\n    },\n    setSelected(data, key) {\n      if (key) {\n        this.selectedItems[key] = data;\n        return;\n      }\n      this.selectedItems = data;\n    },\n    onkeyup(e) {\n      if (e.keyCode == 27) {\n        this.close();\n      }\n    },\n    setIsWorking(data) {\n      this.isWorking = data;\n    }\n  },\n  mounted() {\n    this.$onClient(\"W:DressingRoom:Open\", this.setData);\n    this.$onClient(\"W:DressingRoom:SetPermissions\", this.setPermissions);\n    this.$onClient(\"W:DressingRoom:SetSelected\", this.setSelected);\n    this.$onClient(\"W:DressingRoom:SetIsWorking\", this.setIsWorking);\n    this.$callClient(\"C:DressingRoom:Ready\");\n    window.addEventListener(\"keyup\", this.onkeyup);\n  },\n  beforeUnmount() {\n    this.$offClient(\"W:DressingRoom:SetPermissions\", this.setPermissions);\n    this.$offClient(\"W:DressingRoom:Open\", this.setData);\n    this.$offClient(\"W:DressingRoom:SetSelected\", this.setSelected);\n    this.$offClient(\"W:DressingRoom:SetIsWorking\", this.setIsWorking);\n    window.removeEventListener(\"keyup\", this.onkeyup);\n  }\n};","map":null,"metadata":{},"sourceType":"module"}