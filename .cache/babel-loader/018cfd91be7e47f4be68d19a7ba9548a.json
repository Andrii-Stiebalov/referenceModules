{"ast":null,"code":"export default {\n  data() {\n    return {\n      scaleIconProcent: 0.83,\n      procent: 50,\n      addOnTap: 6.5,\n      minusOnTick: 1,\n      timer: null,\n      isGameStop: false,\n      currentKey: null,\n      lastCheck: new Date(),\n      buttonChanged: false,\n      maxInterval: 5000,\n      minInterval: 500,\n      gameTimer: null,\n      counter: 0\n    };\n  },\n  methods: {\n    setScaleIconProcent() {\n      const fontSize = getComputedStyle(document.documentElement).fontSize;\n      const size = fontSize.slice(0, -2);\n      this.scaleIconProcent = +size / 10 + 0.04;\n    },\n    setElemAnim() {\n      const tapItem = document.getElementById(\"taptapItem\");\n      tapItem.style.transform = \"scale(0.9)\";\n      setTimeout(() => tapItem.style.transform = \"scale(1)\", 100);\n    },\n    generateRandomKeyCode() {\n      let keyCodes = [69, 82, 81, 70, 90, 88, 72];\n      // Получаем случайный индекс элемента\n      let randomIndex = Math.floor(Math.random() * keyCodes.length);\n      // Получаем случайный элемент из массива\n      return keyCodes[randomIndex];\n    },\n    setData(data) {\n      this.currentKey = this.generateRandomKeyCode();\n      this.minInterval = data.minInterval;\n      this.maxInterval = data.maxInterval;\n      this.startGame();\n    },\n    handelTap(e) {\n      if (e.keyCode === this.currentKey) {\n        this.setElemAnim();\n        this.$callClient(\"C:TapTapMiniGame:Tap\");\n        console.log(\"456\");\n      }\n    },\n    getRandomInterval() {\n      return Math.floor(Math.random() * this.maxInterval) + this.minInterval;\n    },\n    startGame() {\n      console.log(\"START\" + this.counter++);\n      this.gameTimer = setTimeout(() => {\n        this.currentKey = this.generateRandomKeyCode();\n        this.$callClient(\"C:TapTapMiniGame:SetNewKey\");\n        this.startGame();\n      }, this.getRandomInterval());\n    },\n    getCharFromKeyCode(keyCode) {\n      return String.fromCharCode(keyCode);\n    }\n  },\n  mounted() {\n    this.setScaleIconProcent();\n    window.addEventListener(\"keyup\", this.handelTap);\n    this.$onClient(\"C:TapTapMiniGame:SetData\", this.setData);\n    this.$callClient(\"C:TapTapMiniGame:Ready\");\n    // const data = {\n    //   minInterval: 500,\n    //   maxInterval: 600,\n    // };\n    // setTimeout(() => {\n    //   this.setData(data);\n    // }, 100);\n  },\n  beforeUnmount() {\n    clearTimeout(this.gameTimer);\n    window.removeEventListener(\"keyup\", this.handelTap);\n    this.$offClient(\"C:TapTapMiniGame:SetData\", this.setData);\n    this.$callClient(\"C:TapTapMiniGame:Ready\");\n  }\n};","map":null,"metadata":{},"sourceType":"module"}