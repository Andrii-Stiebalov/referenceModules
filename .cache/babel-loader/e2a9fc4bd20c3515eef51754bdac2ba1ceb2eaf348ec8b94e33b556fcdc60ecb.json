{"ast":null,"code":"import Tilt from \"vanilla-tilt-vue\";\nexport default {\n  data() {\n    return {\n      selectedCoupon: \"none\",\n      selectedCouponProcent: 1,\n      bindField: {\n        owner: {\n          title: \"Владелец\",\n          imgName: \"owner\"\n        },\n        type: {\n          title: \"Тип дома\",\n          imgName: \"type\"\n        },\n        lock: {\n          title: \"Статус двери\",\n          imgName: \"lock\"\n        },\n        govPrice: {\n          title: \"Государственная цена\",\n          imgName: \"govPrice\",\n          postfix: \"$\"\n        },\n        cohabitant: {\n          title: \"Сожители\",\n          imgName: \"cohabitant\",\n          postfix: \" мест\"\n        },\n        wardrobe: {\n          title: \"Макс. вместимость шкафов\",\n          imgName: \"type\"\n        },\n        garage: {\n          title: \"Вместимость гаража\",\n          imgName: \"garage\",\n          postfix: \" мест\"\n        },\n        parking: {\n          title: \"Паркинг\",\n          imgName: \"garage\"\n        },\n        tax: {\n          title: \"Налог\",\n          imgName: \"tax\",\n          postfix: \"$ / сутки\"\n        }\n      },\n      houseId: 0,\n      houseData: null,\n      buttons: null\n    };\n  },\n  components: {\n    Tilt\n  },\n  watch: {\n    selectedCoupon(v) {\n      if (v === \"none\") {\n        this.selectedCouponProcent = 1;\n        return;\n      }\n      this.selectedCouponProcent = this.couponList.find(coupon => coupon.itemName === this.selectedCoupon).saleValue;\n    }\n  },\n  methods: {\n    getImgPath(name) {\n      return require(`./Assets/itemIcons/${name}.svg`);\n    },\n    closeApp() {\n      this.isActive = false;\n      this.$callClient(\"C:EnterHouse:Close\");\n    },\n    keyup(e) {\n      if (e.keyCode === 27 && !window.isModalShow) {\n        this.closeApp();\n      }\n    },\n    setLockStatus(value) {\n      this.houseData.lock = value;\n    },\n    onСlick(button) {\n      if (button.isBuyButton) {\n        this.$callClient(button.trigger, this.selectedCoupon);\n        return;\n      }\n      this.$callClient(button.trigger);\n    },\n    setData(data) {\n      console.log(data);\n      Object.assign(this.$data, data);\n    },\n    formatMoney(value) {\n      if (!value) {\n        return value;\n      }\n      return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n    }\n  },\n  mounted() {\n    const data = {\n      houseId: \"Дiм #437\",\n      houseData: {\n        owner: \"Morty_Richmond\",\n        lock: false,\n        govPrice: 390000,\n        cohabitant: 4,\n        garage: \"4\",\n        tax: 2304\n      },\n      couponList: [{\n        itemName: \"0.05\",\n        saleValue: 0.05\n      }, {\n        itemName: \"0.1\",\n        saleValue: 0.1\n      }, {\n        itemName: \"0.15\",\n        saleValue: 0.15\n      }],\n      buttons: [{\n        name: \"Увiйти в будинок\",\n        trigger: \"C:EnterHouse:Enter\",\n        isBuyButton: true\n      }, {\n        name: \"%OpenAction%\",\n        trigger: \"C:EnterHouse:ChangeLockStatus\"\n      }]\n    };\n    this.$onClient(\"C:EnterHouse:SetData\", this.setData);\n    this.$callClient(\"C:EnterHouse:Ready\");\n    this.$onClient(\"C:EnterHouse:UpdateLockStatus\", this.setLockStatus);\n    window.addEventListener(\"keyup\", this.keyup);\n    // this.setData(data);\n    // setTimeout(() => this.setLockStatus(true), 1500);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keyup\", this.keyup);\n    this.$offClient(\"C:EnterHouse:SetData\", this.setData);\n    this.$offClient(\"C:EnterHouse:UpdateLockStatus\", this.setLockStatus);\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}