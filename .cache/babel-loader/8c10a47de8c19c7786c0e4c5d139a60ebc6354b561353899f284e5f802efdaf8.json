{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport recursiveAssign from \"@/Functions/RecursiveAssign\";\nconst mp = window.mp;\nconst Browser = window.Browser;\nfunction getRandomId() {\n  return Math.floor(Math.random() * (100000000 - 300 + 1)) + 300;\n}\nfunction findItemCardById(data, id) {\n  for (const key in data) {\n    if (Array.isArray(data[key])) {\n      for (const item of data[key]) {\n        if (item.id === id) {\n          return item;\n        }\n      }\n    }\n  }\n  return null;\n}\nfunction deleteItemCardFromList(data, itemCardId) {\n  for (const key in data) {\n    const itemCardIdx = data[key].findIndex(itemCard => itemCard.id === itemCardId);\n    if (itemCardIdx !== -1 && key !== \"shoppingHistory\") {\n      data[key] = data[key].filter(itemCard => itemCard.id !== itemCardId);\n      return;\n    }\n  }\n}\nconst itemsCard = {\n  myOffers: [],\n  auction: [{\n    id: 3,\n    createdTime: \"2024-08-28T13:00:00\",\n    endTime: \"2024-09-15T18:00:00\",\n    objectType: \"car\",\n    name: \"Dinka Mark II\",\n    price: 59000,\n    bidders: 3,\n    favorites: 0,\n    views: 1,\n    count: 1,\n    model: \"dominator\",\n    carRoom: \"Premium\",\n    data: {}\n  }, {\n    id: 2,\n    createdTime: \"2024-05-16T13:00:00\",\n    endTime: \"2024-09-24T18:00:00\",\n    objectType: \"house\",\n    name: \"Будинок №3158\",\n    price: 130000,\n    bidders: 8,\n    count: 1,\n    houseID: \"3158\",\n    data: {}\n  }, {\n    id: 1,\n    createdTime: \"2024-05-12T13:00:00\",\n    endTime: \"2024-07-28T18:00:00\",\n    objectType: \"business\",\n    name: \"Магазин одягу #1\",\n    price: 100000,\n    bidders: 8,\n    count: 1,\n    bizID: \"5\",\n    data: {}\n  }],\n  transport: [{\n    \"name\": \"Karin Sultan RS\",\n    \"model\": \"sultanrs\",\n    \"carRoom\": \"Karin Sultan RS\",\n    \"vehicleType\": \"passenger\",\n    \"objectType\": \"car\",\n    \"createdTime\": \"2024-07-29T16:36:22\",\n    \"endTime\": \"2024-07-30T15:36:22\",\n    \"id\": 79097,\n    \"price\": 3332222,\n    \"count\": 1,\n    \"data\": {\n      \"ObjectType\": \"Car\",\n      \"ID\": \"3951717\",\n      \"GovPrice\": 120000,\n      \"UUID\": \"3951717\",\n      \"number\": \"BT9919HB\",\n      \"speed\": 177,\n      \"boost\": 190,\n      \"slots\": 28,\n      \"weight\": 60,\n      \"fuel\": 66,\n      \"engine\": 5,\n      \"brakes\": 3,\n      \"transmission\": 4,\n      \"suspension\": 4,\n      \"turbo\": 1,\n      \"fuelType\": \"95\",\n      \"govPrice\": 120000,\n      \"holder\": \"Night_Will\",\n      \"static\": 2,\n      \"comment\": \"asddasads\",\n      \"phoneNumber\": 3209024\n    },\n    \"favorites\": 0,\n    \"views\": 0\n  }, {\n    id: 11,\n    createdTime: \"2024-05-01T13:00:00\",\n    objectType: \"car\",\n    name: \"Dinka Mark II\",\n    vehicleType: \"bike\",\n    price: 5900000,\n    model: \"esskey\",\n    favorites: 28,\n    views: 137,\n    carRoom: \"Lux\",\n    data: {}\n  }, {\n    id: 12,\n    createdTime: \"2024-05-01T13:00:00\",\n    objectType: \"car\",\n    name: \"FreeCrawler\",\n    price: 5900000,\n    model: \"freecrawler\",\n    vehicleType: \"truck\",\n    favorites: 28,\n    views: 137,\n    carRoom: \"Fifantik\",\n    data: {}\n  }, {\n    id: 13,\n    createdTime: \"2024-05-01T13:00:00\",\n    objectType: \"car\",\n    name: \"Virtue\",\n    price: 5900000,\n    model: \"virtue\",\n    vehicleType: \"passenger\",\n    favorites: 28,\n    views: 137,\n    carRoom: \"Premium\",\n    data: {}\n  }],\n  estate: [{\n    id: 21,\n    createdTime: \"2024-05-01T13:00:00\",\n    objectType: \"house\",\n    name: \"Будинок №3158\",\n    price: 15000000,\n    houseID: \"3158\",\n    favorites: 28,\n    views: 137,\n    data: {}\n  }, {\n    id: 22,\n    createdTime: \"2024-05-01T13:00:00\",\n    objectType: \"apart\",\n    name: \"Квартира №25 Апарты №1\",\n    price: 15000000,\n    houseID: \"3158\",\n    favorites: 28,\n    views: 137,\n    data: {}\n  }],\n  business: [{\n    id: 31,\n    createdTime: \"2024-05-01T13:00:00\",\n    time: \"2024-05-17T18:00:00\",\n    objectType: \"business\",\n    name: \"Магазин одягу #1\",\n    price: 15000000,\n    count: 1,\n    favorites: 28,\n    views: 137,\n    bizID: \"5\",\n    data: {}\n  }],\n  atms: [],\n  billboards: [],\n  items: [{\n    id: 61,\n    objectType: \"item\",\n    itemID: 350,\n    name: \"Акумулятор\",\n    count: 15,\n    category: \"Автозапчастини\",\n    favorites: 28,\n    startPrice: 3096,\n    data: {}\n  }],\n  clothes: [{\n    id: 71,\n    objectType: \"clothes\",\n    clothesType: \"Hat\",\n    name: \"Червона кофта\",\n    variation: 623,\n    texture: 0,\n    gender: false,\n    favorites: 28,\n    views: 137,\n    price: 3096,\n    data: {}\n  }, {\n    id: 72,\n    objectType: \"clothes\",\n    clothesType: \"Top\",\n    name: \"Червона кота\",\n    variation: 623,\n    texture: 0,\n    gender: true,\n    favorites: 28,\n    views: 137,\n    price: 3096,\n    data: {}\n  }, {\n    id: 73,\n    objectType: \"clothes\",\n    clothesType: \"Top\",\n    name: \"Червона кофа\",\n    variation: 623,\n    texture: 0,\n    gender: false,\n    favorites: 28,\n    views: 137,\n    price: 3096,\n    data: {}\n  }],\n  services: [\n    // {\n    //   id: 81,\n    //   objectType: \"service\",\n    //   name: \"Тверезий водій\",\n    //   price: 15000000,\n    //   favorites: 28,\n    //   views: 137,\n    //   createdTime: \"2024-05-01T13:00:00\",\n    //   data: {},\n    // },\n  ],\n  transportRent: [{\n    id: 91,\n    createdTime: \"2024-05-01T13:00:00\",\n    objectType: \"car\",\n    name: \"Dinka Mark II\",\n    price: 5900000,\n    count: 1,\n    model: \"elegy\",\n    favorites: 28,\n    views: 137,\n    carRoom: \"Premium\",\n    vehicleType: \"passenger\",\n    data: {}\n  }],\n  myListings: [],\n  createListing: [{\n    id: 62,\n    objectType: \"item\",\n    itemID: 350,\n    name: \"Акумулятор\",\n    category: \"Автозапчастини\",\n    favorites: 28,\n    state: 64,\n    count: 33,\n    views: 137,\n    price: 3096,\n    data: {}\n  }, {\n    id: 63,\n    objectType: \"item\",\n    itemID: 126,\n    name: \"Assault Rifle\",\n    category: \"Rifles\",\n    count: 1,\n    favorites: 28,\n    views: 137,\n    price: 3096,\n    data: {}\n  }, {\n    name: \"Emperor Q50\",\n    model: \"gdaq50\",\n    carRoom: \"Emperor Q50\",\n    vehicleType: \"passenger\",\n    objectType: \"car\",\n    data: {\n      ObjectType: \"Car\",\n      ID: \"5399228\",\n      GovPrice: 1250000,\n      UUID: \"5399228\",\n      number: \"\",\n      speed: 220,\n      boost: 270,\n      slots: 20,\n      weight: 80,\n      fuel: 76,\n      engine: 0,\n      brakes: 0,\n      transmission: 0,\n      suspension: 0,\n      turbo: 0,\n      fuelType: \"95\",\n      govPrice: 1250000,\n      minPrice: 625000\n    },\n    id: 7112409\n  }],\n  shoppingHistory: [],\n  stock: [{\n    id: 712,\n    objectType: \"item\",\n    itemID: 350,\n    count: 44,\n    name: \"Акумулятор\",\n    state: 30,\n    category: \"Автозапчастини\",\n    endTime: \"2024-09-15T18:00:00\",\n    status: \"stock\",\n    data: {}\n  }, {\n    id: 72,\n    objectType: \"clothes\",\n    clothesType: \"Top\",\n    name: \"Червона кота\",\n    variation: 623,\n    texture: 0,\n    gender: true,\n    data: {}\n  }],\n  moderation: []\n};\nconst itemCardDatas = {\n  auction: [{\n    id: 1,\n    data: {\n      UUID: \"2214368\",\n      govPrice: 250000,\n      number: \"2ERH\",\n      speed: 250,\n      boost: 203,\n      slots: 30,\n      weight: 70,\n      fuel: 70,\n      engine: 3,\n      brakes: 4,\n      transmission: 2,\n      suspension: 3,\n      turbo: 1,\n      fuelType: 80,\n      biddingList: []\n    }\n  }, {\n    id: 2,\n    data: {\n      govPrice: 3500000,\n      roommates: 2,\n      garageSlot: 2,\n      street: \"Рокфолд-Плз, Бульвар Дель-Перро\",\n      coords: {\n        x: -1000,\n        y: 2000\n      },\n      biddingList: [],\n      furniture: {\n        workshop: 4,\n        shelf: 5\n      }\n    }\n  }, {\n    id: 3,\n    data: {\n      govPrice: 3500000,\n      street: \"Рокфолд-Плз, Бульвар Дель-Перро\",\n      coords: {\n        x: -1000,\n        y: 2000\n      },\n      bizData: {\n        revenue: 289177,\n        profit: 108857,\n        averageBill: 371,\n        sellCount: 803,\n        profitability: 37.64\n      },\n      biddingList: []\n    }\n  }],\n  transport: [{\n    \"name\": \"Karin Sultan RS\",\n    \"model\": \"SultanRs\",\n    \"carRoom\": \"Karin Sultan RS\",\n    \"vehicleType\": \"passenger\",\n    \"objectType\": \"car\",\n    \"createdTime\": \"2024-07-29T16:36:22\",\n    \"endTime\": \"2024-07-30T15:36:22\",\n    \"id\": 79097,\n    \"price\": 3332222,\n    \"count\": 1,\n    \"data\": {\n      \"ObjectType\": \"Car\",\n      \"ID\": \"3951717\",\n      \"GovPrice\": 120000,\n      \"UUID\": \"3951717\",\n      \"number\": \"BT9919HB\",\n      \"speed\": 177,\n      \"boost\": 190,\n      \"slots\": 28,\n      \"weight\": 60,\n      \"fuel\": 66,\n      \"engine\": 5,\n      \"brakes\": 3,\n      \"transmission\": 4,\n      \"suspension\": 4,\n      \"turbo\": 1,\n      \"fuelType\": \"95\",\n      \"govPrice\": 120000,\n      \"holder\": \"Night_Will\",\n      \"static\": 2,\n      \"comment\": \"asddasads\",\n      \"phoneNumber\": 3209024\n    },\n    \"favorites\": 0,\n    \"views\": 0\n  }, {\n    id: 11,\n    data: {\n      minPrice: 22000,\n      UUID: \"2214368\",\n      govPrice: 250000,\n      number: \"2ERH\",\n      speed: 250,\n      boost: 203,\n      slots: 30,\n      weight: 70,\n      fuel: 70,\n      engine: 3,\n      brakes: 4,\n      transmission: 2,\n      suspension: 3,\n      turbo: 1,\n      fuelType: 80,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      isComplained: false,\n      comment: \"Продам машину фулл фт Продам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фт Продам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фт Продам машину фулл фтПродам машину фулл фтПродам машину фулл фт Продам машину фулл фт Продам машину фулл фт Продам машину фулл фт Продам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фтПродам машину фулл фт Продам машину фулл фтПродам машину фулл фтПродам машину фулл фт Продам машину фулл фтПродам машину фулл фтПродам машину фулл фт Продам машину фулл фтПродам машину фулл фт\",\n      static: 123132\n    }\n  }, {\n    id: 12,\n    data: {\n      minPrice: 41000,\n      UUID: \"2214368\",\n      govPrice: 250000,\n      number: \"2ERH\",\n      speed: 250,\n      boost: 203,\n      slots: 30,\n      weight: 70,\n      fuel: 70,\n      engine: 3,\n      brakes: 4,\n      transmission: 2,\n      isComplained: false,\n      suspension: 3,\n      turbo: 1,\n      fuelType: 80,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      comment: \"Продам машину фулл фт\",\n      static: 123132\n    }\n  }, {\n    id: 13,\n    data: {\n      minPrice: 12000,\n      UUID: \"2214368\",\n      govPrice: 250000,\n      number: \"2ERH\",\n      speed: 250,\n      boost: 203,\n      slots: 30,\n      weight: 70,\n      fuel: 70,\n      engine: 3,\n      brakes: 4,\n      transmission: 2,\n      suspension: 3,\n      turbo: 1,\n      fuelType: 80,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      comment: \"Продам машину фулл фт\",\n      static: 123132,\n      isComplained: false\n    }\n  }],\n  estate: [{\n    id: 21,\n    data: {\n      minPrice: 52000,\n      govPrice: 3500000,\n      roommates: 2,\n      garageSlot: 2,\n      street: \"Рокфолд-Плз, Бульвар Дель-Перро\",\n      coords: {\n        x: -1000,\n        y: 2000\n      },\n      static: 231321,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      comment: \"Продается дом у вайнвуда, топ за свои деньги\",\n      furniture: {\n        workshop: 4,\n        shelf: 1\n      },\n      isComplained: false\n    }\n  }, {\n    id: 22,\n    data: {\n      minPrice: 22000,\n      govPrice: 3500000,\n      garageSlot: 2,\n      roommates: 2,\n      street: \"Рокфолд-Плз, Бульвар Дель-Перро\",\n      coords: {\n        x: -1000,\n        y: 2000\n      },\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      static: 21312,\n      comment: \"Продается дом у вайнвуда, топ за свои деньги\",\n      furniture: {\n        workshop: 4,\n        shelf: 1\n      },\n      isComplained: false\n    }\n  }],\n  business: [{\n    id: 31,\n    data: {\n      minPrice: 82000,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      static: 231321,\n      govPrice: 3500000,\n      street: \"Рокфолд-Плз, Бульвар Дель-Перро\",\n      coords: {\n        x: -1000,\n        y: 2000\n      },\n      bizData: {\n        revenue: 289177,\n        profit: 108857,\n        averageBill: 371,\n        sellCount: 803,\n        profitability: 37.64\n      },\n      isComplained: false\n    }\n  }],\n  atms: [],\n  billboards: [],\n  items: [{\n    id: 61,\n    data: {\n      buyInfo: [{\n        id: 1,\n        holder: \"Vladimir_Butkevich\",\n        count: 100000,\n        static: 2313,\n        state: 30,\n        priceOfCount: 3096,\n        endTime: \"2024-08-27T18:50:00\"\n      }, {\n        id: 2,\n        holder: \"Vladimir_Butkevich\",\n        count: 3,\n        static: 2313,\n        state: 70,\n        priceOfCount: 3096,\n        endTime: \"2024-08-16T18:51:00\"\n      }],\n      statistic: []\n    }\n  }],\n  clothes: [{\n    id: 71,\n    data: {\n      minPrice: 22000,\n      holder: \"Vladimir_Butkevich\",\n      static: 60375,\n      phoneNumber: 42658343,\n      govPrice: 3500000,\n      isComplained: false\n    }\n  }, {\n    id: 72,\n    data: {\n      minPrice: 6000,\n      holder: \"Vladimir_Butkevich\",\n      static: 60375,\n      phoneNumber: 42658343,\n      govPrice: 3500000,\n      isComplained: false\n    }\n  }, {\n    id: 73,\n    data: {\n      holder: \"Vladimir_Butkevich\",\n      static: 60375,\n      phoneNumber: 42658343,\n      govPrice: 3500000\n    }\n  }],\n  services: [{\n    id: 81,\n    data: {\n      static: 231321,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      comment: \"Тверезий водій пупа лупа\",\n      isComplained: false\n    }\n  }],\n  transportRent: [{\n    id: 91,\n    data: {\n      rentType: \"hours\",\n      UUID: \"2214368\",\n      govPrice: 250000,\n      number: \"2ERH\",\n      speed: 250,\n      boost: 203,\n      slots: 30,\n      weight: 70,\n      fuel: 70,\n      engine: 3,\n      brakes: 4,\n      transmission: 2,\n      suspension: 3,\n      turbo: 1,\n      fuelType: 80,\n      holder: \"Vladimir_Butkevich\",\n      phoneNumber: 42658343,\n      comment: \"Продам машину фулл фт\",\n      static: 123132,\n      isComplained: false\n    }\n  }],\n  myListings: [],\n  createListing: [],\n  shoppingHistory: [],\n  stock: [],\n  moderation: []\n};\nconst data = {\n  favoritesId: [],\n  myListingsId: [],\n  settings: {\n    isTablet: false,\n    listingMaxPostingPrice: 100000000,\n    offerMaxPostingPrice: 100000000,\n    exchangeOfferDeletePrice: 1000,\n    listingPricePerHour: 1000,\n    listingMinPostingHours: 2,\n    listingMaxPostingHours: 30,\n    coefficients: [1.25, 1.5, 1.75]\n  },\n  \"filters\": {\n    \"category\": null,\n    \"sort\": null,\n    \"transport\": null,\n    \"rent\": null,\n    \"gender\": null,\n    \"dealership\": null,\n    \"clothes\": null\n  },\n  \"modalData\": {\n    \"itemCard\": null,\n    \"type\": null\n  }\n};\nmp.events.add(\"C:MarketPlace:Ready\", () => {\n  Browser.setStore(\"marketPlace/setStore\", data);\n});\n\n// Аукцион\n\n// Глобальный\nmp.events.add(\"C:MarketPlace:Auction:MakeBet\", (itemCardId, cooficientIdx) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCard = itemsCard.auction.find(itemCard => itemCard.id === itemCardId);\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const newPrice = itemCard.price * data.settings.coefficients[cooficientIdx];\n    const raise = newPrice - itemCard.price;\n    itemCard.price = newPrice;\n    const bet = {\n      playerName: \"Yevhen_Will\",\n      raiseCount: raise,\n      newPrice: newPrice,\n      time: new Date(),\n      static: 213702\n    };\n    itemCardData.biddingList.push(bet);\n    Browser.setStore(\"marketPlace/auctionAddBet\", [itemCardId, bet]);\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPlace:Auction:AddLot\", () => {\n  const newItemCardData = {\n    id: getRandomId(),\n    data: {\n      UUID: \"777777\",\n      govPrice: 250000,\n      number: \"2ERH\",\n      speed: 250,\n      boost: 203,\n      slots: 30,\n      weight: 70,\n      fuel: 70,\n      engine: 3,\n      brakes: 4,\n      transmission: 2,\n      suspension: 3,\n      turbo: 1,\n      fuelType: 80,\n      biddingList: []\n    }\n  };\n  const newItemCard = {\n    id: 3,\n    createdTime: \"2024-02-28T13:00:00\",\n    endTime: \"2024-07-28T18:00:00\",\n    objectType: \"car\",\n    name: \"Dinka Mark II\",\n    price: 59000,\n    bidders: 3,\n    count: 1,\n    model: \"dominator\",\n    carRoom: \"Premium\",\n    data: {}\n  };\n  itemsCard.auction.push(newItemCard);\n  itemCardDatas.auction.push(newItemCardData);\n  Browser.setStore(\"marketPlace/auctionAddLot\", newItemCard);\n});\n// Глобальный\nmp.events.add(\"C:MarketPlace:Auction:Continue\", itemCardId => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const itemCard = itemsCard.auction.find(itemCard => itemCard.id === itemCardId);\n    const notify = {\n      continued: \"2024-08-12T13:00:00\",\n      time: new Date()\n    };\n    itemCardData.biddingList.push(notify);\n    itemCard.endTime = notify.continued;\n    Browser.setStore(\"marketPlace/auctionContinue\", [itemCardId, notify]);\n  }\n});\n\n// Карточка товара\n\n// Локальный\nmp.events.add(\"C:MarketPlace:ItemCard:Select\", itemCardId => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const itemCard = findItemCardById(itemsCard, itemCardId);\n    if (itemCard && itemCardData) {\n      Browser.setStore(\"marketPlace/itemSetData\", [itemCardId, itemCardData]);\n      if (itemCard.objectType === \"item\") {\n        Browser.setRoute(\"/MarketPlace/viewing/items\");\n      }\n    }\n  }\n});\n\n// Обьявление\n// Локальный\nmp.events.add(\"C:MarketPlace:Listing:Buy\", (itemCardId, method) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const itemCard = findItemCardById(itemsCard, itemCardId);\n    const currentTime = new Date();\n    itemCard.endTime = new Date(currentTime.setDate(currentTime.getDate() + 7));\n    itemCard.createdTime = new Date();\n    itemCard.status = \"stock\";\n    itemCard.data = itemCardData;\n    itemCard.count = 1;\n    delete itemCard.price;\n    delete itemCard?.holder;\n    delete itemCard?.phoneNumber;\n    console.log(itemCard);\n    itemsCard.stock.push(itemCard);\n    console.log(itemCard);\n    Browser.setStore(\"marketPlace/listingBuy\", [itemCardId, itemCard]);\n    Browser.setRoute(\"/MarketPlace/viewing/stock\");\n  }\n});\n// Локальный\nmp.events.add(\"C:MarketPlace:Listing:Rent\", (itemCardId, timeCount, method) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (exception) {\n    console.log(exception);\n  } finally {\n    const itemCard = findItemCardById(itemsCard, itemCardId);\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    Browser.setStore(\"marketPlace/listingRent\", [itemCardId]);\n  }\n});\n// Локальный\nmp.events.add(\"C:MarketPlace:Listing:Call\", itemCardId => {});\n// Локальный\nmp.events.add(\"C:MarketPlace:Listing:Text\", itemCardId => {});\n// Удаление глобальное \"marketPlace/itemsCardDelete\"\n// Добавление глобальное   \"marketPlace/listingAddEmpty\"\n//                      || \"marketPlace/listingAddRent\"\n\n// Глобальный\nmp.events.add(\"C:MarketPLace:Listing:Create\", (itemCardId, comment, price, hours, method, extraImgs) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const itemCard = Object.assign({}, findItemCardById(itemsCard, itemCardId));\n    let section = \"\";\n    switch (itemCard.objectType) {\n      case \"car\":\n        section = \"transport\";\n        break;\n      case \"house\":\n      case \"apart\":\n        section = \"estate\";\n        break;\n      case \"business\":\n        section = \"business\";\n        break;\n      case \"atms\":\n        section = \"atms\";\n        break;\n      case \"billboards\":\n        section = \"billboards\";\n        break;\n      case \"item\":\n        section = \"items\";\n        break;\n      case \"clothes\":\n        section = \"clothes\";\n        break;\n    }\n    const newItemCardId = getRandomId();\n    const currentTime = new Date();\n    itemCard.createdTime = currentTime;\n    itemCard.endTime = new Date(currentTime.getTime() + hours * 60 * 60 * 1000);\n    itemCard.price = price;\n    itemCard.favorites = 0;\n    itemCard.views = 0;\n    itemCard.id = newItemCardId;\n    itemCard.extraImgs = extraImgs;\n    const newItemCardData = {\n      id: newItemCardId,\n      data: Object.assign(itemCardData, {\n        static: 213702,\n        holder: \"Yevhen_Butkevich\",\n        phoneNumber: 12345678,\n        comment: comment\n      })\n    };\n    itemsCard[section].push(itemCard);\n    itemCardDatas[section].push(newItemCardData);\n    itemsCard.stock = itemsCard.stock.filter(itemCard => itemCard.id !== itemCardId.id);\n    Browser.setStore(\"marketPlace/listingAdd\", [itemCardId, itemCard]);\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPLace:Listing:Create:Rent\", (itemCardId, comment, price, rentType, hours, method, extraImgs) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const itemCard = Object.assign({}, findItemCardById(itemsCard, itemCardId));\n    const newItemCardId = getRandomId();\n    const currentTime = new Date();\n    itemCard.createdTime = currentTime;\n    itemCard.endTime = new Date(currentTime.getTime() + hours * 60 * 60 * 1000);\n    itemCard.price = price;\n    itemCard.favorites = 0;\n    itemCard.views = 0;\n    itemCard.id = newItemCardId;\n    itemCard.extraImgs = extraImgs;\n    const newItemCardData = {\n      id: newItemCardId,\n      data: {\n        rentType: rentType,\n        static: 213702,\n        holder: \"Yevhen_Butkevich\",\n        phoneNumber: 12345678,\n        comment: comment\n      }\n    };\n    itemsCard.transportRent.push(itemCard);\n    itemCardDatas.transportRent.push(newItemCardData);\n    itemsCard.stock = itemsCard.stock.filter(itemCard => itemCard.id !== ItemCard.id);\n    Browser.setStore(\"marketPlace/listingAddRent\", [itemCardId, itemCard]);\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPLace:Listing:Create:Service\", (name, comment, price, hours, method, extraImgs) => {\n  if (name && price && hours) {\n    const newItemCardId = getRandomId();\n    const currentTime = new Date();\n    const newItemCard = {\n      id: newItemCardId,\n      objectType: \"service\",\n      name: name,\n      favorites: 0,\n      views: 0,\n      price: price,\n      createdTime: currentTime,\n      endTime: new Date(currentTime.getTime() + hours * 60 * 60 * 1000),\n      data: {}\n    };\n    const newItemCardData = {\n      id: newItemCardId,\n      data: {\n        static: 213702,\n        holder: \"Yevhen_Butkevich\",\n        phoneNumber: 12345678,\n        comment: comment\n      }\n    };\n    newItemCard.extraImgs = JSON.parse(extraImgs);\n    itemsCard.services.push(newItemCard);\n    itemCardDatas.services.push(newItemCardData);\n    Browser.setStore(\"marketPlace/listingAddEmpty\", newItemCard);\n  }\n});\n\n// Глобальный\nmp.events.add(\"C:MarketPLace:Listing:Edit\", (name, comment, price, itemCardId) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  } catch (exception) {\n    console.log(exception);\n  } finally {\n    let itemCard = findItemCardById(itemsCard, itemCardId);\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    itemCard.name = name;\n    itemCard.price = price;\n    itemCardData.comment = comment;\n    const newItemCard = Object.assign({}, itemCard);\n    newItemCard.data = itemCardData;\n    newItemCard.data.comment = comment;\n    Browser.setStore(\"marketPlace/rewriteItemCard\", [itemCardId, newItemCard]);\n    Browser.setRoute(\"back\");\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPLace:Listing:Delete\", itemCardId => {\n  deleteItemCardFromList(itemCardDatas, itemCardId);\n  deleteItemCardFromList(itemsCard, itemCardId);\n  Browser.setStore(\"marketPlace/deleteListingLocal\", itemCardId);\n});\n// Глобальный\nmp.events.add(\"C:MarketPLace:Listing:Continue\", (itemCardId, hours, method) => {\n  const itemCard = findItemCardById(itemsCard, itemCardId);\n  const continueTime = new Date(new Date());\n  const newEndTime = new Date(itemCard.endTime.getTime() + hours * 60 * 60 * 1000);\n  itemCard.endTime = newEndTime;\n  itemCard.continueTime = continueTime;\n  Browser.setStore(\"marketPlace/continueListing\", [itemCardId, newEndTime, continueTime]);\n});\n\n// Локальный\nmp.events.add(\"C:MarketPlace:Listing:Map\", itemCardId => {});\n\n// Локальный\nmp.events.add(\"C:MarketPlace:Listing:Business:Set\", (itemCardId, type) => {\n  const itemCard = findItemCardById(itemsCard, itemCardId);\n  if (itemCard) {\n    const bizData = {\n      revenue: 289177,\n      profit: 311,\n      averageBill: 371,\n      sellCount: 333,\n      profitability: 99.99\n    };\n    Browser.setStore(\"marketPlace/listingBusinessSet\", [itemCardId, bizData]);\n  }\n});\n\n// Склад\n// Локальный\nmp.events.add(\"C:MarketPlace:Stock:Unload\", (itemCardId, count) => {\n  const itemCard = itemsCard.stock.find(itemCard => itemCard.id === itemCardId);\n  if (itemCard) {\n    if (itemCard?.count && itemCard.count - count > 0) {\n      Browser.setStore(\"marketPlace/stockSetCount\", [itemCardId, itemCard.count - count]);\n      itemCard.count = itemCard.count - count;\n    } else {\n      Browser.setStore(\"marketPlace/stockUnload\", itemCardId);\n      itemsCard.stock = itemsCard.stock.filter(itemCard => itemCard.id !== itemCardId);\n    }\n  }\n});\n\n// Биржа\n// Глобальный\nmp.events.add(\"C:MarketPlace:ItemCard:Add:Exchange\", (sellItemId, priceOfCount, count) => {\n  const availableItemsCard = [...itemsCard.createListing, ...itemsCard.stock];\n  const sellItem = availableItemsCard.find(itemCard => itemCard.id === sellItemId);\n  const exchangeItem = itemsCard.items.find(exchangeItem => exchangeItem.itemID === sellItem.itemID);\n  const exchangeItemData = findItemCardById(itemCardDatas, exchangeItem.id)?.data;\n  if (sellItem && exchangeItem && exchangeItemData) {\n    const newItemCard = Object.assign({}, sellItem);\n    const leftCount = sellItem.count - count;\n    const offerID = getRandomId();\n    sellItem.count = leftCount;\n    const currentTime = new Date();\n    const endTime = new Date().setDate(currentTime.getDate() + 7);\n    newItemCard.id = offerID;\n    newItemCard.price = priceOfCount * count;\n    newItemCard.createdTime = currentTime;\n    newItemCard.endTime = endTime;\n    newItemCard.count = count;\n    newItemCard.exchangeID = exchangeItem.id;\n    const offer = {\n      id: offerID,\n      holder: \"Yevhen_Butkevich\",\n      count: count,\n      static: 213702,\n      priceOfCount: priceOfCount,\n      createdTime: currentTime,\n      endTime: endTime\n    };\n    if (sellItem?.state) {\n      offer.state = sellItem.state;\n    }\n    const offerLink = {\n      exchangeID: exchangeItem.id,\n      offerID: offerID\n    };\n    exchangeItemData.buyInfo.push(offer);\n    itemsCard.myOffers.push(newItemCard);\n    if (leftCount) {\n      sellItem.count = leftCount;\n      Browser.setStore(\"marketPlace/itemSetCount\", [sellItemId, leftCount]);\n    } else {\n      itemsCard.createListing.filter(itemCard => itemCard.id !== sellItemId);\n      Browser.setStore(\"marketPlace/itemsCardDelete\", sellItemId);\n    }\n    console.log(offerLink);\n    Browser.setStore(\"marketPlace/setStartPriceById\", [exchangeItem.id, 123456]);\n    Browser.setStore(\"marketPlace/exchangeAddLocal\", [exchangeItem.id, offer, offerLink]);\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPlace:Exchange:Add\", (itemCardId, priceOfItem, sellItemId, count) => {\n  const exchangeItemData = itemCardDatas.items.find(itemCard => itemCard.id === itemCardId)?.data;\n  const exchangeItem = itemsCard.items.find(itemCard => itemCard.id === itemCardId);\n  const sellItem = itemsCard.stock.find(itemCard => itemCard.id === sellItemId);\n  if (exchangeItem && exchangeItemData && sellItem) {\n    const leftCount = sellItem.count - count;\n    const offerId = getRandomId();\n    const currentTime = new Date();\n    // Время удаления \"неделя\"\n    const endTime = new Date().setDate(currentTime.getDate() + 7);\n\n    // бэк\n    sellItem.count = leftCount;\n    const offer = {\n      id: offerId,\n      holder: \"Yevhen_Butkevich\",\n      count: count,\n      static: 213702,\n      priceOfCount: priceOfItem,\n      createdTime: currentTime,\n      endTime: endTime\n    };\n    if (sellItem?.state) {\n      offer.state = sellItem.state;\n    }\n    const offerLink = {\n      exchangeID: itemCardId,\n      offerID: offerId\n    };\n\n    // бэк\n    exchangeItemData.buyInfo.push(offer);\n    itemsCard.myOffers.push(offerLink);\n    if (leftCount) {\n      sellItem.count = leftCount;\n      Browser.setStore(\"marketPlace/itemSetCount\", [sellItemId, leftCount]);\n    } else {\n      itemsCard.stock.filter(itemCard => itemCard.id !== sellItemId);\n      Browser.setStore(\"marketPlace/itemsCardDelete\", sellItemId);\n    }\n    Browser.setStore(\"marketPlace/exchangeAddLocal\", [itemCardId, offer, offerLink]);\n    Browser.setStore(\"marketPlace/setStartPriceById\", [itemCardId, 123456]);\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPlace:Exchange:Buy\", (itemCardId, offerId, count, method) => {\n  const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n  const itemCard = findItemCardById(itemsCard, itemCardId);\n  const currentTime = new Date();\n  const newOfferId = getRandomId();\n  const offer = itemCardData.buyInfo.find(offer => offer.id === offerId);\n  const newItemCard = Object.assign({}, itemCard);\n  const leftCount = offer.count - count;\n  offer.count = leftCount;\n  delete newItemCard.favorites;\n  delete newItemCard.views;\n  newItemCard.count = count;\n  newItemCard.price = count * offer.priceOfCount;\n  newItemCard.id = newOfferId;\n  newItemCard.count = count;\n  newItemCard.status = \"stock\";\n  newItemCard.createdTime = currentTime;\n  newItemCard.endTime = currentTime.setDate(currentTime.getDate() + 7);\n  itemsCard.stock.push(newItemCard);\n  if (leftCount) {\n    Browser.setStore(\"marketPlace/exchangeEdit\", [itemCardId, offerId, leftCount]);\n  } else {\n    itemCardData.buyInfo = itemCardData.buyInfo.filter(offer => offer.id !== offerId);\n    Browser.setStore(\"marketPlace/exchangeDelete\", [itemCardId, offerId]);\n  }\n  Browser.setStore(\"marketPlace/exchangeBuy\", newItemCard);\n});\n// Глобальный\nmp.events.add(\"C:MarketPlace:Exchange:Offer:TimeIsUp\", (itemCardId, offerId) => {\n  try {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const offer = itemCardData.buyInfo.find(offer => offer.id === offerId);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    const itemCardData = findItemCardById(itemCardDatas, itemCardId).data;\n    const offer = itemCardData.buyInfo.find(offer => offer.id === offerId);\n    itemCardData.buyInfo = itemCardData.buyInfo.filter(offer => offer.id !== offerId);\n    Browser.setStore(\"marketPlace/exchangeDelete\", [itemCardId, offerId]);\n  }\n});\n// Глобальный\nmp.events.add(\"C:MarketPlace:ItemCard:TimeIsUp\", itemCardId => {\n  try {\n    const itemCardEndTime = findItemCardById(itemsCard, itemCardId).endTime;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    deleteItemCardFromList(itemsCard, itemCardId);\n    Browser.setStore(\"marketPlace/itemsCardDelete\", itemCardId);\n  }\n});\nmp.events.add(\"C:MarketPlace:Exchange:Graph:Set\", itemCardId => {\n  const statistic = [{\n    date: \"2024-01-21T09:52:14\",\n    value: 10000\n  }, {\n    date: \"2024-02-22T09:52:14\",\n    value: 140000\n  }, {\n    date: \"2024-03-21T09:52:14\",\n    value: 10000\n  }, {\n    date: \"2024-04-22T09:52:14\",\n    value: 140000\n  }, {\n    date: \"2024-05-21T09:52:14\",\n    value: 10000\n  }, {\n    date: \"2024-06-22T09:52:14\",\n    value: 140000\n  }, {\n    date: \"2024-07-21T09:52:14\",\n    value: 10000\n  }, {\n    date: \"2024-08-22T09:52:14\",\n    value: 140000\n  }, {\n    date: \"2024-09-21T09:52:14\",\n    value: 10000\n  }, {\n    date: \"2024-10-22T09:52:14\",\n    value: 140000\n  }, {\n    date: \"2024-11-22T09:52:14\",\n    value: 140000\n  }, {\n    date: \"2024-12-22T09:52:14\",\n    value: 140000\n  }];\n  Browser.setStore(\"marketPlace/setExchangeGraph\", [itemCardId, statistic]);\n});\n\n// Избранное\nmp.events.add(\"C:MarketPlace:ItemCard:Favorite:Add\", itemCardId => {});\nmp.events.add(\"C:MarketPlace:ItemCard:Favorite:Delete\", itemCardId => {});\nmp.events.add(\"C:MarketPlace:Close\", () => {\n  Browser.setRoute(\"/\");\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}